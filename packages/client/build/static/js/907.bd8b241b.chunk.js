/*! For license information please see 907.bd8b241b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemployee_access_dashboard=self.webpackChunkemployee_access_dashboard||[]).push([[907],{936:(t,e,s)=>{s.d(e,{A:()=>i});const i=(0,s(8119).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4994:(t,e,s)=>{s.d(e,{A:()=>i});const i=(0,s(8119).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},6907:(t,e,s)=>{s.r(e),s.d(e,{ApplicationManagementPage:()=>C});var i=s(1882),a=s(2176),r=s(4416),n=s(3985),l=s(4015),o=s(6233),c=s(5256),u=s(5531);class d extends u.Q{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=this.client.defaultMutationOptions(t),(0,l.f8)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,i.A)((0,i.A)({},this.options),{},{variables:"undefined"!==typeof t?t:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:(0,o.$)(),e="loading"===t.status,s=(0,i.A)((0,i.A)({},t),{},{isLoading:e,isPending:e,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset});this.currentResult=s}notify(t){c.j.batch(()=>{var e,s,i,a;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(i=(a=this.mutateOptions).onSettled)||i.call(a,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var r,n,l,o;null==(r=(n=this.mutateOptions).onError)||r.call(n,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(o=this.mutateOptions).onSettled)||l.call(o,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach(t=>{let{listener:e}=t;e(this.currentResult)})})}}var h=s(7874),p=s(617);function m(t,e,s){const n=(0,l.GR)(t,e,s),o=(0,r.jE)({context:n.context}),[u]=a.useState(()=>new d(o,n));a.useEffect(()=>{u.setOptions(n)},[u,n]);const m=(0,h.r)(a.useCallback(t=>u.subscribe(c.j.batchCalls(t)),[u]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),x=a.useCallback((t,e)=>{u.mutate(t,e).catch(y)},[u]);if(m.error&&(0,p.G)(u.options.useErrorBoundary,[m.error]))throw m.error;return(0,i.A)((0,i.A)({},m),{},{mutate:x,mutateAsync:m.mutate})}function y(){}var x=s(6158),v=s(4994),b=s(936),g=s(9600),A=s(1356),f=s(9889),j=s(8146),k=s(9752),M=s(812);const R=async()=>{const{data:t}=await f.A.get("/api/applications");return t},C=()=>{const t=(0,r.jE)(),[e,s]=(0,a.useState)(""),[l,o]=(0,a.useState)(null),{data:c,isLoading:u}=(0,n.I)({queryKey:["applications"],queryFn:R}),d=m({mutationFn:t=>f.A.post("/api/applications",{name:t}),onSuccess:()=>{x.Ay.success("Application created!"),t.invalidateQueries(["applications"]),s("")},onError:()=>x.Ay.error("Failed to create application.")}),h=m({mutationFn:t=>{let{id:e,name:s}=t;return f.A.put("/api/applications/".concat(e),{name:s})},onSuccess:()=>{x.Ay.success("Application updated!"),t.invalidateQueries(["applications"]),o(null)},onError:()=>x.Ay.error("Failed to update application.")}),p=m({mutationFn:t=>f.A.delete("/api/applications/".concat(t)),onSuccess:()=>{x.Ay.success("Application deleted!"),t.invalidateQueries(["applications"])},onError:()=>x.Ay.error("Failed to delete application.")}),y=t=>{t.preventDefault(),l&&l.name.trim()&&h.mutate({id:l.id,name:l.name.trim()})};return u?(0,M.jsx)(k.Z,{}):(0,M.jsxs)(j.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"p-6",children:[(0,M.jsxs)("div",{className:"mb-6",children:[(0,M.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Manage Applications"}),(0,M.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Add, remove, or edit internal applications available for access requests."})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Add New Application"}),(0,M.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&d.mutate(e.trim())},className:"flex gap-2",children:[(0,M.jsx)("input",{type:"text",value:e,onChange:t=>s(t.target.value),placeholder:"New application name",className:"flex-grow px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"}),(0,M.jsxs)(A.$,{type:"submit",disabled:d.isLoading,children:[(0,M.jsx)(v.A,{size:16,className:"mr-2"})," Add"]})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Existing Applications"}),(0,M.jsx)("ul",{className:"space-y-2",children:null===c||void 0===c?void 0:c.map(t=>(0,M.jsx)("li",{className:"flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-800 rounded-md",children:(null===l||void 0===l?void 0:l.id)===t.id?(0,M.jsxs)("form",{onSubmit:y,className:"flex-grow flex gap-2",children:[(0,M.jsx)("input",{type:"text",value:l.name,onChange:t=>o((0,i.A)((0,i.A)({},l),{},{name:t.target.value})),className:"flex-grow px-3 py-1 border rounded-md dark:bg-gray-700 dark:border-gray-600"}),(0,M.jsx)(A.$,{type:"submit",size:"sm",disabled:h.isLoading,children:"Save"}),(0,M.jsx)(A.$,{type:"button",size:"sm",variant:"secondary",onClick:()=>o(null),children:"Cancel"})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{children:t.name}),(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsx)(A.$,{size:"sm",variant:"secondary",onClick:()=>o(t),children:(0,M.jsx)(b.A,{size:14})}),(0,M.jsx)(A.$,{size:"sm",variant:"danger",onClick:()=>p.mutate(t.id),disabled:p.isLoading,children:(0,M.jsx)(g.A,{size:14})})]})]})},t.id))})]})]})]})}},9600:(t,e,s)=>{s.d(e,{A:()=>i});const i=(0,s(8119).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=907.bd8b241b.chunk.js.map