{"version":3,"file":"static/js/843.5f97bed3.chunk.js","mappings":"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","sources":["components/ui/WelcomePage.js","components/ui/ChangePasswordModal.js","pages/ProfilePage.js"],"sourcesContent":["import React from 'react';\r\nimport { User } from 'lucide-react';\r\n\r\nexport const WelcomePage = ({ user }) => (\r\n    <div className=\"p-6 text-center\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 max-w-lg mx-auto p-8\">\r\n            <User className=\"mx-auto w-16 h-16 text-blue-500\" />\r\n            <h2 className=\"mt-6 text-2xl font-bold text-gray-900 dark:text-white\">Welcome, {user.name}!</h2>\r\n            <p className=\"mt-2 text-gray-600 dark:text-gray-400\">Your user account is active and you are successfully logged in.</p>\r\n            <div className=\"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-yellow-800 dark:text-yellow-300\">\r\n                <p className=\"font-semibold\">Your employee profile has not been created in the system yet. Please contact an IT administrator to set up your employee record.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);","import React, { useState } from 'react';\r\nimport toast from 'react-hot-toast';\r\nimport { Button } from './Button';\r\nimport api from '../../api/api';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nexport const ChangePasswordModal = ({ onClose }) => {\r\n    const [formData, setFormData] = useState({ oldPassword: '', newPassword: '', confirmPassword: '' });\r\n    const [error, setError] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (formData.newPassword !== formData.confirmPassword) {\r\n            setError(\"New passwords do not match.\");\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            const { oldPassword, newPassword } = formData;\r\n            await api.post('/api/users/change-password', { oldPassword, newPassword });\r\n            toast.success('Password changed successfully!');\r\n            onClose();\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || 'An error occurred.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n    \r\n    const passwordRequirements = [\r\n        \"At least 8 characters long\",\r\n        \"Contains at least one uppercase letter\",\r\n        \"Contains at least one lowercase letter\",\r\n        \"Contains at least one number\",\r\n        \"Contains at least one special character\"\r\n    ];\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50\"\r\n            >\r\n                <motion.div\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    exit={{ scale: 0.9, opacity: 0 }}\r\n                    transition={{ duration: 0.2 }}\r\n                    className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md\"\r\n                >\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"p-6\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Change Password</h3>\r\n                            <div className=\"mt-6 space-y-4\">\r\n                                <div>\r\n                                    <label htmlFor=\"oldPassword\">Old Password</label>\r\n                                    <input type=\"password\" name=\"oldPassword\" id=\"oldPassword\" required value={formData.oldPassword} onChange={handleChange} className=\"mt-1 w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label htmlFor=\"newPassword\">New Password</label>\r\n                                    <input type=\"password\" name=\"newPassword\" id=\"newPassword\" required value={formData.newPassword} onChange={handleChange} className=\"mt-1 w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label htmlFor=\"confirmPassword\">Confirm New Password</label>\r\n                                    <input type=\"password\" name=\"confirmPassword\" id=\"confirmPassword\" required value={formData.confirmPassword} onChange={handleChange} className=\"mt-1 w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600\" />\r\n                                </div>\r\n                                <div className=\"text-xs text-gray-500 dark:text-gray-400 space-y-1\">\r\n                                    <p className=\"font-semibold\">Password must meet the following requirements:</p>\r\n                                    <ul className=\"list-disc list-inside\">\r\n                                        {passwordRequirements.map(req => <li key={req}>{req}</li>)}\r\n                                    </ul>\r\n                                </div>\r\n                                {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-gray-50 dark:bg-gray-700/50 px-6 py-3 flex justify-end gap-3\">\r\n                            <Button type=\"button\" onClick={onClose} disabled={isSubmitting} variant=\"secondary\">Cancel</Button>\r\n                            <Button type=\"submit\" disabled={isSubmitting} variant=\"primary\">{isSubmitting ? 'Saving...' : 'Save Changes'}</Button>\r\n                        </div>\r\n                    </form>\r\n                </motion.div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};","import React, { useState, useCallback, useEffect, useRef } from \"react\";\r\nimport {\r\n  UserSquare,\r\n  LayoutGrid,\r\n  HardDrive,\r\n  Bot,\r\n  KeyRound,\r\n  Laptop,\r\n  MoreVertical,\r\n} from \"lucide-react\";\r\nimport { EmployeeDetailHeader } from \"./EmployeeDetailPage/EmployeeDetailHeader\";\r\nimport { EmployeeDetailsTab } from \"./EmployeeDetailPage/EmployeeDetailsTab\";\r\nimport { EmployeeApplicationsTab } from \"./EmployeeDetailPage/EmployeeApplicationsTab\";\r\nimport { JiraTicketModal } from \"../components/ui/JiraTicketModal\";\r\nimport { WelcomePage } from \"../components/ui/WelcomePage\";\r\nimport { AccessDeniedPage } from \"../components/ui/AccessDeniedPage\";\r\nimport { UnifiedTimelinePage } from \"./EmployeeDetailPage/UnifiedTimelinePage\";\r\nimport { Button } from \"../components/ui/Button\";\r\nimport { ChangePasswordModal } from \"../components/ui/ChangePasswordModal\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { PlatformLogPage } from \"./EmployeeDetailPage/PlatformLogPage\";\r\nimport { DevicesTab } from \"./EmployeeDetailPage/DevicesTab\";\r\nimport { useMediaQuery } from \"../hooks/useMediaQuery\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuthStore } from \"../stores/authStore\";\r\nimport api from \"../api/api\";\r\nimport { EmployeeDetailSkeleton } from \"../components/ui/EmployeeDetailSkeleton\";\r\n\r\nconst fetchMe = async () => {\r\n  const { data } = await api.get(\"/api/me\");\r\n  return data;\r\n};\r\n\r\nexport const ProfilePage = ({\r\n  employee,\r\n  permissions,\r\n  onEdit,\r\n  onDeactivate,\r\n  onLogout,\r\n  user,\r\n}) => {\r\n  const { isAuthenticated } = useAuthStore();\r\n  const [activeTab, setActiveTab] = useState(\"details\");\r\n  const [platformStatuses, setPlatformStatuses] = useState([]);\r\n  const [isLoadingPlatforms, setIsLoadingPlatforms] = useState(true);\r\n  const [isChangePasswordModalOpen, setIsChangePasswordModalOpen] =\r\n    useState(false);\r\n\r\n  const [tabData, setTabData] = useState({\r\n    timeline: { data: null, loading: false, error: null, fetched: false },\r\n  });\r\n\r\n  const [isJiraModalOpen, setIsJiraModalOpen] = useState(false);\r\n  const [selectedTicketId, setSelectedTicketId] = useState(null);\r\n  const [isMoreMenuOpen, setIsMoreMenuOpen] = useState(false);\r\n  const moreMenuRef = useRef(null);\r\n  const isDesktop = useMediaQuery(\"(min-width: 768px)\");\r\n\r\n  const { data: currentUserEmployeeRecord, isLoading: isLoadingMe } = useQuery({\r\n    queryKey: [\"me\"],\r\n    queryFn: fetchMe,\r\n    enabled: isAuthenticated,\r\n    staleTime: 1000 * 60 * 5,\r\n  });\r\n\r\n  const allTabs = [\r\n    {\r\n      id: \"details\",\r\n      label: \"Details\",\r\n      icon: <UserSquare size={16} />,\r\n      permission: true,\r\n    },\r\n    {\r\n      id: \"devices\",\r\n      label: \"Devices\",\r\n      icon: <Laptop size={16} />,\r\n      permission: true,\r\n    },\r\n    {\r\n      id: \"platforms\",\r\n      label: \"Apps & Platforms\",\r\n      shortLabel: \"Access\",\r\n      icon: <LayoutGrid size={16} />,\r\n      permission: true,\r\n    },\r\n    {\r\n      id: \"platform-logs\",\r\n      label: \"Platform Logs\",\r\n      shortLabel: \"Logs\",\r\n      icon: <HardDrive size={16} />,\r\n      permission: permissions.includes(\"log:read:platform\"),\r\n    },\r\n    {\r\n      id: \"timeline\",\r\n      label: \"Unified Timeline\",\r\n      shortLabel: \"Timeline\",\r\n      icon: <Bot size={16} />,\r\n      permission: permissions.includes(\"log:read:platform\"),\r\n    },\r\n  ].filter((tab) => tab.permission);\r\n\r\n  const VISIBLE_TABS_COUNT = 3;\r\n  const visibleTabs = isDesktop\r\n    ? allTabs\r\n    : allTabs.slice(0, VISIBLE_TABS_COUNT);\r\n  const overflowTabs = isDesktop ? [] : allTabs.slice(VISIBLE_TABS_COUNT);\r\n  const isActiveTabInMoreMenu = overflowTabs.some(\r\n    (tab) => tab.id === activeTab\r\n  );\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (moreMenuRef.current && !moreMenuRef.current.contains(event.target)) {\r\n        setIsMoreMenuOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const fetchTimelineData = useCallback(\r\n    (force = false) => {\r\n      if (\r\n        !employee ||\r\n        !permissions.includes(\"log:read:platform\") ||\r\n        (!force && (tabData.timeline.fetched || tabData.timeline.loading))\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      const token = localStorage.getItem(\"accessToken\");\r\n      let url = `${process.env.REACT_APP_API_BASE_URL}/api/employees/${employee.id}/unified-timeline`;\r\n\r\n      setTabData((prev) => ({\r\n        ...prev,\r\n        timeline: { ...prev.timeline, loading: true },\r\n      }));\r\n\r\n      fetch(url, { headers: { Authorization: `Bearer ${token}` } })\r\n        .then((res) =>\r\n          res.ok ? res.json() : res.json().then((err) => Promise.reject(err))\r\n        )\r\n        .then((data) => {\r\n          setTabData((prev) => ({\r\n            ...prev,\r\n            timeline: { data, loading: false, error: null, fetched: true },\r\n          }));\r\n        })\r\n        .catch((err) => {\r\n          setTabData((prev) => ({\r\n            ...prev,\r\n            timeline: {\r\n              data: [],\r\n              loading: false,\r\n              error: err.message,\r\n              fetched: true,\r\n            },\r\n          }));\r\n        });\r\n    },\r\n    [employee, permissions, tabData.timeline]\r\n  );\r\n\r\n  const fetchInitialData = useCallback(async () => {\r\n    if (!employee) return;\r\n    const token = localStorage.getItem(\"accessToken\");\r\n    if (!token) {\r\n      onLogout();\r\n      return;\r\n    }\r\n\r\n    setIsLoadingPlatforms(true);\r\n    fetch(\r\n      `${process.env.REACT_APP_API_BASE_URL}/api/employees/${employee.id}/platform-statuses`,\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    )\r\n      .then((res) => (res.ok ? res.json() : []))\r\n      .then((statusData) => setPlatformStatuses(statusData))\r\n      .catch((err) => console.error(\"Failed to fetch platform statuses:\", err))\r\n      .finally(() => setIsLoadingPlatforms(false));\r\n  }, [employee, onLogout]);\r\n\r\n  useEffect(() => {\r\n    if (employee) {\r\n      fetchInitialData();\r\n    }\r\n  }, [employee, fetchInitialData]);\r\n\r\n  useEffect(() => {\r\n    if (employee && activeTab === \"timeline\") {\r\n      fetchTimelineData();\r\n    }\r\n  }, [employee, activeTab, fetchTimelineData]);\r\n\r\n  const handleTabClick = (tabId) => {\r\n    setActiveTab(tabId);\r\n    setIsMoreMenuOpen(false);\r\n  };\r\n\r\n  const handleTicketClick = (ticketId) => {\r\n    if (ticketId) {\r\n      setSelectedTicketId(ticketId);\r\n      setIsJiraModalOpen(true);\r\n    }\r\n  };\r\n\r\n  if (isLoadingMe) return <EmployeeDetailSkeleton />;\r\n\r\n  if (!permissions.includes(\"profile:read:own\")) {\r\n    return <AccessDeniedPage />;\r\n  }\r\n  if (!employee) {\r\n    return <WelcomePage user={user} />;\r\n  }\r\n\r\n  const TabButton = ({ id, label, shortLabel, icon }) => (\r\n    <button\r\n      onClick={() => handleTabClick(id)}\r\n      className={`flex-shrink-0 flex items-center gap-2 py-3 px-4 border-b-2 font-semibold text-sm transition-colors whitespace-nowrap ${\r\n        activeTab === id\r\n          ? \"border-kredivo-primary text-kredivo-primary\"\r\n          : \"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\r\n      }`}\r\n    >\r\n      {icon} {isDesktop ? label : shortLabel || label}\r\n    </button>\r\n  );\r\n\r\n  const TabContent = (\r\n    <div className=\"mt-6\">\r\n      {activeTab === \"details\" && (\r\n        <EmployeeDetailsTab\r\n          employee={employee}\r\n          permissions={permissions}\r\n          onTicketClick={handleTicketClick}\r\n        />\r\n      )}\r\n      {activeTab === \"devices\" && <DevicesTab employeeId={employee.id} />}\r\n      {activeTab === \"platforms\" && (\r\n        <EmployeeApplicationsTab\r\n          applications={employee.applications || []}\r\n          platformStatuses={platformStatuses}\r\n          isLoading={isLoadingPlatforms}\r\n          onTicketClick={handleTicketClick}\r\n        />\r\n      )}\r\n      {activeTab === \"platform-logs\" && (\r\n        <PlatformLogPage employeeId={employee.id} onLogout={onLogout} />\r\n      )}\r\n      {activeTab === \"timeline\" && (\r\n        <UnifiedTimelinePage\r\n          events={tabData.timeline.data}\r\n          loading={tabData.timeline.loading}\r\n          error={tabData.timeline.error}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      exit={{ opacity: 0, y: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row justify-between md:items-center\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n              My Profile\r\n            </h1>\r\n            <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">\r\n              This is your personal employee record and application access list.\r\n            </p>\r\n          </div>\r\n          <Button\r\n            onClick={() => setIsChangePasswordModalOpen(true)}\r\n            variant=\"secondary\"\r\n            className=\"mt-4 md:mt-0\"\r\n          >\r\n            <KeyRound className=\"w-4 h-4 mr-2\" /> Change Password\r\n          </Button>\r\n        </div>\r\n        <div className=\"p-4 sm:p-6 space-y-6\">\r\n          <EmployeeDetailHeader\r\n            employee={employee}\r\n            onEdit={onEdit}\r\n            onDeactivate={onDeactivate}\r\n            permissions={permissions}\r\n            isOwnProfile={true}\r\n          />\r\n          <div className=\"border-b border-gray-200 dark:border-gray-700\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <nav\r\n                className=\"-mb-px flex items-center overflow-x-auto\"\r\n                aria-label=\"Tabs\"\r\n              >\r\n                {visibleTabs.map((tab) => (\r\n                  <TabButton key={tab.id} {...tab} />\r\n                ))}\r\n              </nav>\r\n              {overflowTabs.length > 0 && (\r\n                <div ref={moreMenuRef} className=\"relative ml-auto pl-2\">\r\n                  <button\r\n                    onClick={() => setIsMoreMenuOpen((prev) => !prev)}\r\n                    className={`flex-shrink-0 flex items-center gap-2 py-3 px-4 border-b-2 font-semibold text-sm transition-colors whitespace-nowrap ${\r\n                      isActiveTabInMoreMenu\r\n                        ? \"border-kredivo-primary text-kredivo-primary\"\r\n                        : \"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300\"\r\n                    }`}\r\n                  >\r\n                    <MoreVertical size={16} /> More\r\n                  </button>\r\n                  <AnimatePresence>\r\n                    {isMoreMenuOpen && (\r\n                      <motion.div\r\n                        initial={{ opacity: 0, y: -10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-10\"\r\n                      >\r\n                        <div className=\"py-1\">\r\n                          {overflowTabs.map((tab) => (\r\n                            <button\r\n                              key={tab.id}\r\n                              onClick={() => handleTabClick(tab.id)}\r\n                              className={`w-full text-left flex items-center gap-3 px-4 py-2 text-sm ${\r\n                                activeTab === tab.id\r\n                                  ? \"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                                  : \"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n                              }`}\r\n                            >\r\n                              {tab.icon} {tab.shortLabel || tab.label}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </motion.div>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          {TabContent}\r\n        </div>\r\n      </div>\r\n      {isJiraModalOpen && (\r\n        <JiraTicketModal\r\n          ticketId={selectedTicketId}\r\n          onClose={() => setIsJiraModalOpen(false)}\r\n        />\r\n      )}\r\n      {isChangePasswordModalOpen && (\r\n        <ChangePasswordModal\r\n          onClose={() => setIsChangePasswordModalOpen(false)}\r\n        />\r\n      )}\r\n    </motion.div>\r\n  );\r\n};"],"names":["WelcomePage","_ref","user","_jsx","className","children","_jsxs","User","name","ChangePasswordModal","onClose","formData","setFormData","useState","oldPassword","newPassword","confirmPassword","error","setError","isSubmitting","setIsSubmitting","handleChange","e","value","target","prev","_objectSpread","AnimatePresence","motion","div","initial","opacity","animate","exit","scale","transition","duration","onSubmit","async","preventDefault","api","post","toast","success","err","_err$response","_err$response$data","response","data","message","htmlFor","type","id","required","onChange","map","req","Button","onClick","disabled","variant","fetchMe","get","ProfilePage","employee","permissions","onEdit","onDeactivate","onLogout","isAuthenticated","useAuthStore","activeTab","setActiveTab","platformStatuses","setPlatformStatuses","isLoadingPlatforms","setIsLoadingPlatforms","isChangePasswordModalOpen","setIsChangePasswordModalOpen","tabData","setTabData","timeline","loading","fetched","isJiraModalOpen","setIsJiraModalOpen","selectedTicketId","setSelectedTicketId","isMoreMenuOpen","setIsMoreMenuOpen","moreMenuRef","useRef","isDesktop","useMediaQuery","currentUserEmployeeRecord","isLoading","isLoadingMe","useQuery","queryKey","queryFn","enabled","staleTime","allTabs","label","icon","UserSquare","size","permission","Laptop","shortLabel","LayoutGrid","HardDrive","includes","Bot","filter","tab","visibleTabs","slice","overflowTabs","isActiveTabInMoreMenu","some","useEffect","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","fetchTimelineData","useCallback","force","arguments","length","undefined","token","localStorage","getItem","url","concat","process","fetch","headers","Authorization","then","res","ok","json","Promise","reject","catch","fetchInitialData","statusData","console","finally","handleTabClick","tabId","handleTicketClick","ticketId","EmployeeDetailSkeleton","AccessDeniedPage","TabButton","_ref2","TabContent","EmployeeDetailsTab","onTicketClick","DevicesTab","employeeId","EmployeeApplicationsTab","applications","PlatformLogPage","UnifiedTimelinePage","events","y","KeyRound","EmployeeDetailHeader","isOwnProfile","ref","MoreVertical","JiraTicketModal"],"sourceRoot":""}