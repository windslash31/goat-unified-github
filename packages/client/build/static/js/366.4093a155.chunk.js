/*! For license information please see 366.4093a155.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemployee_access_dashboard=self.webpackChunkemployee_access_dashboard||[]).push([[366],{292:(e,s,a)=>{a.d(s,{U:()=>r});var t=a(5376);const r=e=>{const[s,a]=(0,t.useState)(window.matchMedia(e).matches);return(0,t.useEffect)(()=>{const s=window.matchMedia(e),t=()=>a(s.matches);return s.addEventListener("change",t),()=>s.removeEventListener("change",t)},[e]),s}},461:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1721:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},3366:(e,s,a)=>{a.r(s),a.d(s,{UserManagementPage:()=>M});var t=a(9479),r=a(5376),l=a(1871),i=a(1721),d=a(5635);const n=(0,d.A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var o=a(6991),c=a(8304),x=a(6322),m=a(5838),y=a(165),u=a(9579),h=a(1325),p=a(1660);const g=e=>{let{roles:s,onClose:a,onUserCreated:i}=e;const[d,n]=(0,r.useState)({fullName:"",email:"",roleId:""}),[o,c]=(0,r.useState)(!1),x=e=>{const{name:s,value:a}=e.target;n(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a}))},g=s.map(e=>({id:e.id,name:e.name}));return(0,p.jsx)(u.N,{children:(0,p.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,p.jsx)(h.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:(0,p.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);const s=localStorage.getItem("accessToken");try{const e=await fetch("".concat("https://goat-backend-990004954390.asia-southeast2.run.app","/api/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(d)}),a=await e.json();if(!e.ok)throw new Error(a.message||"Failed to create user.");i(a.temporaryPassword)}catch(a){l.Ay.error(a.message||"An error occurred.")}finally{c(!1)}},children:[(0,p.jsxs)("div",{className:"p-6",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Create New User"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Create a new application account. A temporary password will be generated."}),(0,p.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium",children:"Full Name"}),(0,p.jsx)("input",{type:"text",name:"fullName",id:"fullName",required:!0,value:d.fullName,onChange:x,className:"mt-1 w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email Address"}),(0,p.jsx)("input",{type:"email",name:"email",id:"email",required:!0,value:d.email,onChange:x,className:"mt-1 w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"roleId",className:"block text-sm font-medium",children:"Role"}),(0,p.jsx)(y.A,{id:"roleId",value:d.roleId,options:g,onChange:e=>{n(s=>(0,t.A)((0,t.A)({},s),{},{roleId:e}))},placeholder:"Select a role..."})]})]})]}),(0,p.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 px-6 py-3 flex justify-end gap-3",children:[(0,p.jsx)(m.$,{type:"button",onClick:a,disabled:o,variant:"secondary",children:"Cancel"}),(0,p.jsx)(m.$,{type:"submit",disabled:o||!d.roleId,variant:"primary",children:o?"Creating...":"Create User"})]})]})})})})};var b=a(5338),f=a(52),j=a(461),w=a(3761);const v=(0,d.A)("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),k=e=>{let{password:s,onClose:a}=e;const[t,i]=(0,r.useState)(!1);return(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm text-center p-6",children:[(0,p.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900",children:(0,p.jsx)(j.A,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-4",children:"User Created Successfully!"}),(0,p.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"A temporary password has been generated. Please copy and share it with the user."}),(0,p.jsxs)("div",{className:"relative my-4",children:[(0,p.jsx)("input",{type:"text",readOnly:!0,value:s,className:"w-full bg-gray-100 dark:bg-gray-900 rounded-md p-3 pr-10 text-center font-mono text-sm"}),(0,p.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(s).then(()=>{i(!0),l.Ay.success("Password copied to clipboard!"),setTimeout(()=>i(!1),2e3)},()=>{l.Ay.error("Failed to copy password.")})},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:t?(0,p.jsx)(w.A,{className:"w-5 h-5 text-green-500"}):(0,p.jsx)(v,{className:"w-5 h-5"})})]}),(0,p.jsx)("button",{onClick:a,className:"w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md",children:"Done"})]})})};var N=a(3580),A=a(3686),C=a(7189),P=a(7693),S=a(2478);const _=e=>{let{apiKey:s,onClose:a}=e;const[t,i]=(0,r.useState)(!1);return(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[60]",children:(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md text-center p-6",children:[(0,p.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900",children:(0,p.jsx)(S.A,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mt-4",children:"API Key Generated"}),(0,p.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Please copy this key and store it securely. You will not be able to see it again."}),(0,p.jsxs)("div",{className:"relative my-4",children:[(0,p.jsx)("input",{type:"text",readOnly:!0,value:s,className:"w-full bg-gray-100 dark:bg-gray-900 rounded-md p-3 pr-10 text-center font-mono text-xs"}),(0,p.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(s).then(()=>{i(!0),l.Ay.success("API Key copied to clipboard!")})},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:t?(0,p.jsx)(w.A,{className:"w-5 h-5 text-green-500"}):(0,p.jsx)(v,{className:"w-5 h-5"})})]}),(0,p.jsx)(m.$,{onClick:a,variant:"primary",className:"w-full justify-center",children:"Done"})]})})},I=e=>{let{user:s,onClose:a}=e;const[t,i]=(0,r.useState)([]),[d,n]=(0,r.useState)(!0),[o,x]=(0,r.useState)(""),[y,g]=(0,r.useState)(30),[f,j]=(0,r.useState)(!1),[w,v]=(0,r.useState)(null),[k,N]=(0,r.useState)(!1),[S,I]=(0,r.useState)(null),R=(0,r.useCallback)(async()=>{n(!0);try{const{data:e}=await A.A.get("/api/users/".concat(s.id,"/api-keys"));i(e)}catch(e){l.Ay.error("Failed to load API keys."),console.error(e)}finally{n(!1)}},[s.id]);(0,r.useEffect)(()=>{R()},[R]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.N,{children:(0,p.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,p.jsxs)(h.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl flex flex-col max-h-[90vh]",children:[(0,p.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,p.jsxs)("h3",{className:"text-lg font-semibold",children:["API Keys for ",s.full_name]}),(0,p.jsx)("button",{onClick:a,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:(0,p.jsx)(C.A,{className:"w-5 h-5"})})]}),(0,p.jsx)("div",{className:"p-6 flex-1 overflow-y-auto",children:d?(0,p.jsx)("p",{children:"Loading keys..."}):(0,p.jsxs)("ul",{className:"space-y-3",children:[t.map(e=>(0,p.jsxs)("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-semibold",children:e.description}),(0,p.jsxs)("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(e.created_at).toLocaleDateString(),e.expires_at?" | Expires: ".concat(new Date(e.expires_at).toLocaleDateString()):" | No Expiration"]})]}),(0,p.jsxs)(m.$,{onClick:()=>(e=>{v(e),N(!0)})(e),variant:"danger",className:"px-2 py-1 text-xs",children:[(0,p.jsx)(c.A,{className:"w-3 h-3 mr-1"})," Revoke"]})]},e.id)),0===t.length&&(0,p.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No API keys found for this user."})]})}),(0,p.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.trim()){j(!0);try{const{data:e}=await A.A.post("/api/users/".concat(s.id,"/api-keys"),{description:o,expiresInDays:y});I(e.newKey),x(""),g(30),R()}catch(r){var a,t;l.Ay.error((null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to generate API key.")}finally{j(!1)}}else l.Ay.error("Please provide a description for the key.")},className:"p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsx)("h4",{className:"font-semibold mb-2",children:"Generate New Key"}),(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,p.jsx)("input",{type:"text",value:o,onChange:e=>x(e.target.value),placeholder:"e.g., n8n workflow key",className:"flex-grow w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"}),(0,p.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2",children:[(0,p.jsx)("input",{type:"number",value:y,onChange:e=>g(e.target.value),min:"1",max:"365",className:"w-20 px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"}),(0,p.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"days"})]}),(0,p.jsxs)(m.$,{type:"submit",disabled:f,variant:"primary",className:"w-full sm:w-auto justify-center",children:[(0,p.jsx)(P.A,{className:"w-4 h-4 mr-2"}),f?"Generating...":"Generate"]})]})]})]})})}),(0,p.jsx)(b.R,{isOpen:k,onClose:()=>N(!1),onConfirm:async()=>{if(w)try{await A.A.delete("/api/users/api-keys/".concat(w.id)),l.Ay.success("API Key revoked successfully!"),R()}catch(e){l.Ay.error("Failed to revoke API key.")}finally{N(!1),v(null)}},title:"Revoke API Key",message:'Are you sure you want to revoke the key "'.concat(null===w||void 0===w?void 0:w.description,'"? This action is irreversible.')}),S&&(0,p.jsx)(_,{apiKey:S,onClose:()=>I(null)})]})};var R=a(292);const U=e=>{let{user:s,currentUser:a,roleOptions:t,permissions:l,onRoleChange:d,onApiKey:x,onResetPassword:m,onDelete:u}=e;const[h,g]=(0,r.useState)(!1),b=r.useRef(null);(0,r.useEffect)(()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const f=s.id!==a.id;return(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"flex justify-between items-start",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-bold text-gray-900 dark:text-white",children:s.full_name}),(0,p.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.email})]}),(0,p.jsxs)("div",{className:"relative",ref:b,children:[(0,p.jsx)("button",{onClick:()=>g(e=>!e),className:"p-2 -mr-2 text-gray-400 hover:text-gray-600",children:(0,p.jsx)(i.A,{size:20})}),h&&(0,p.jsx)("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-xl z-20",children:(0,p.jsxs)("ul",{children:[l.includes("user:manage_api_keys")&&(0,p.jsx)("li",{children:(0,p.jsxs)("button",{onClick:()=>{x(s),g(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,p.jsx)(n,{className:"w-4 h-4"})," API Keys"]})}),l.includes("user:reset_password")&&f&&(0,p.jsx)("li",{children:(0,p.jsxs)("button",{onClick:()=>{m(s),g(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,p.jsx)(o.A,{className:"w-4 h-4"})," Reset Password"]})}),l.includes("user:delete")&&f&&(0,p.jsx)("li",{children:(0,p.jsxs)("button",{onClick:()=>{u(s),g(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-red-500 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50",children:[(0,p.jsx)(c.A,{className:"w-4 h-4"})," Delete User"]})})]})})]})]}),(0,p.jsxs)("div",{className:"mt-4",children:[(0,p.jsx)("label",{className:"text-xs font-medium text-gray-500",children:"Role"}),(0,p.jsx)(y.A,{value:s.role_id,options:t,onChange:d(s.id),placeholder:"No Role",disabled:!l.includes("user:update:role")})]})]})},M=e=>{let{onLogout:s}=e;const[a,i]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[j,w]=(0,r.useState)(!0),{user:v}=(0,N.n)(),C=(null===v||void 0===v?void 0:v.permissions)||[],P=(0,R.U)("(min-width: 768px)"),[S,_]=(0,r.useState)(!1),[M,K]=(0,r.useState)(!1),[D,E]=(0,r.useState)(null),[F,z]=(0,r.useState)(!1),[L,O]=(0,r.useState)(null),[T,$]=(0,r.useState)(null),[V,G]=(0,r.useState)(!1),[q,H]=(0,r.useState)(null),Z=(0,r.useCallback)(async()=>{w(!0);try{const[e,s]=await Promise.all([A.A.get("/api/users"),A.A.get("/api/roles")]);i(e.data),u(s.data)}catch(e){console.error(e),l.Ay.error("Could not load user data.")}finally{w(!1)}},[]);(0,r.useEffect)(()=>{Z()},[Z]);const B=e=>async s=>{const r=[...a],n=a.map(a=>{var r;return a.id===e?(0,t.A)((0,t.A)({},a),{},{role_id:s,role_name:null===(r=d.find(e=>e.id===s))||void 0===r?void 0:r.name}):a});i(n);try{await A.A.put("/api/users/".concat(e,"/role"),{roleId:s}),l.Ay.success("User role updated!")}catch(x){var o,c;l.Ay.error((null===(o=x.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||"Could not update role."),i(r)}},J=e=>{E(e),K(!0)},X=e=>{O(e),z(!0)},Y=e=>{H(e),G(!0)};if(j)return(0,p.jsx)("div",{className:"p-6",children:"Loading..."});const Q=d.map(e=>({id:e.id,name:e.name}));return(0,p.jsxs)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[(0,p.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Management"}),(0,p.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Create, delete, and assign roles to users."})]}),C.includes("user:create")&&(0,p.jsxs)(m.$,{onClick:()=>_(!0),className:"w-full mt-4 sm:mt-0 sm:w-auto justify-center",children:[(0,p.jsx)(x.A,{className:"w-5 h-5 mr-2"})," Create User"]})]}),P?(0,p.jsx)("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,p.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Full Name"}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Assigned Role"}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),(0,p.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(e=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:e.full_name}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-56",children:(0,p.jsx)(y.A,{value:e.role_id,options:Q,onChange:B(e.id),placeholder:"No Role",disabled:!C.includes("user:update:role")})}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[C.includes("user:manage_api_keys")&&(0,p.jsx)("button",{onClick:()=>Y(e),className:"p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/20",title:"Manage API Keys",children:(0,p.jsx)(n,{className:"w-4 h-4"})}),C.includes("user:reset_password")&&(0,p.jsx)("button",{onClick:()=>X(e),disabled:e.id===v.id||"admin"===e.role_name,className:"p-2 text-gray-500 hover:text-yellow-600 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/20 disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset Password",children:(0,p.jsx)(o.A,{className:"w-4 h-4"})}),C.includes("user:delete")&&(0,p.jsx)("button",{onClick:()=>J(e),disabled:e.id===v.id,className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-100 dark:hover:bg-red-900/20 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete User",children:(0,p.jsx)(c.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})}):(0,p.jsx)("div",{className:"mt-4 space-y-4",children:a.map(e=>(0,p.jsx)(U,{user:e,currentUser:v,roleOptions:Q,permissions:C,onRoleChange:B,onApiKey:Y,onResetPassword:X,onDelete:J},e.id))})]}),(0,p.jsxs)(f.Z,{children:[S&&(0,p.jsx)(g,{roles:d,onClose:()=>_(!1),onUserCreated:e=>{_(!1),Z(),$(e)}}),M&&(0,p.jsx)(b.R,{isOpen:M,onClose:()=>K(!1),onConfirm:async()=>{if(D)try{await A.A.delete("/api/users/".concat(D.id)),l.Ay.success("User deleted successfully!"),Z()}catch(a){var e,s;l.Ay.error((null===(e=a.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Could not delete user.")}finally{K(!1),E(null)}},title:"Delete User",message:'Are you sure you want to delete the user "'.concat(null===D||void 0===D?void 0:D.full_name,'"? This will permanently revoke their access.')}),F&&(0,p.jsx)(b.R,{isOpen:F,onClose:()=>z(!1),onConfirm:async()=>{if(L)try{const e=await A.A.post("/api/users/".concat(L.id,"/reset-password"));$(e.data.temporaryPassword),l.Ay.success("Password for ".concat(L.full_name," has been reset."))}catch(a){var e,s;l.Ay.error((null===(e=a.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to reset password.")}finally{z(!1),O(null)}},title:"Reset Password",message:'Are you sure you want to reset the password for "'.concat(null===L||void 0===L?void 0:L.full_name,'"? Their old password will no longer work.')}),T&&(0,p.jsx)(k,{password:T,onClose:()=>$(null)}),V&&q&&(0,p.jsx)(I,{user:q,onClose:()=>G(!1)})]})]})}},5338:(e,s,a)=>{a.d(s,{R:()=>n});a(5376);var t=a(2478),r=a(5838),l=a(9579),i=a(1325),d=a(1660);const n=e=>{let{isOpen:s,onClose:a,onConfirm:n,title:o,message:c}=e;return(0,d.jsx)(l.N,{children:s&&(0,d.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,d.jsxs)(i.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm",children:[(0,d.jsxs)("div",{className:"p-6 text-center",children:[(0,d.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:(0,d.jsx)(t.A,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900 dark:text-white",children:o}),(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c})})]})]}),(0,d.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-4 py-4 sm:px-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[(0,d.jsx)(r.$,{onClick:a,variant:"secondary",className:"w-full justify-center sm:w-auto",children:"Cancel"}),(0,d.jsx)(r.$,{onClick:n,variant:"danger",className:"w-full justify-center sm:w-auto",children:"Confirm"})]})]})})})}},6322:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},6991:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]])},7189:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7693:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8304:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(5635).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=366.4093a155.chunk.js.map