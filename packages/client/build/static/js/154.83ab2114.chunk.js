/*! For license information please see 154.83ab2114.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemployee_access_dashboard=self.webpackChunkemployee_access_dashboard||[]).push([[154],{235:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},1616:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1775:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},2937:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},3259:(e,t,s)=>{s.d(t,{I:()=>x});var a=s(9479),r=s(5376),l=s(165),i=s(52),n=s(9579),d=s(1325),c=s(1660);const o=e=>{let{label:t,name:s,value:a,onChange:r,options:i=[]}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),(0,c.jsx)(l.A,{id:s,options:i,value:a,onChange:e=>r({target:{name:s,value:e}}),placeholder:"All"})]})},x=e=>{let{initialFilters:t,onApply:s,onClear:l,onClose:x,options:m,buttonRef:h,isActivityLog:y=!1}=e;const[p,g]=(0,r.useState)(t),u=(0,r.useRef)(null),[j,v]=(0,r.useState)({top:0,left:0,width:"auto"}),f=[{id:"all",name:"All"},{id:"active",name:"Active"},{id:"inactive",name:"Inactive"},{id:"invited",name:"Invited"}];(0,r.useLayoutEffect)(()=>{if(h.current){const e=h.current.getBoundingClientRect();window.innerWidth<768?v({top:e.bottom+10,left:"1rem",right:"1rem",width:"auto"}):v({top:e.bottom+10,right:window.innerWidth-e.right,left:"auto",width:"24rem"})}},[h]),(0,r.useEffect)(()=>{const e=e=>{e.target.closest('[data-role="custom-select-options"]')||u.current&&!u.current.contains(e.target)&&h.current&&!h.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x,h]);const k=e=>{const{name:t,value:s}=e.target;g(e=>(0,a.A)((0,a.A)({},e),{},{[t]:s}))};return(0,c.jsx)(i.Z,{children:(0,c.jsx)(n.N,{children:(0,c.jsxs)(d.P.div,{ref:u,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,scale:.98,y:-5},visible:{opacity:1,scale:1,y:0,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:-5,transition:{duration:.15,ease:"easeIn"}}},style:{position:"absolute",top:"".concat(j.top,"px"),left:j.left,right:j.right,width:j.width},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-20",children:[(0,c.jsxs)("div",{className:"p-5",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),(0,c.jsx)("div",{className:"space-y-4",children:y?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o,{label:"Action Type",name:"actionType",value:p.actionType,onChange:k,options:m.actionTypes}),(0,c.jsx)(o,{label:"Actor",name:"actorEmail",value:p.actorEmail,onChange:k,options:m.actors}),(0,c.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),(0,c.jsx)("input",{type:"date",name:"startDate",id:"startDate",value:p.startDate||"",onChange:k,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),(0,c.jsx)("input",{type:"date",name:"endDate",id:"endDate",value:p.endDate||"",onChange:k,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md"})]})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o,{label:"Status",name:"status",value:p.status,onChange:k,options:f}),(0,c.jsx)(o,{label:"Internal Application",name:"application_id",value:p.application_id,onChange:k,options:m.applications})]})})]}),(0,c.jsxs)("div",{className:"px-5 py-3 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600 flex justify-between items-center rounded-b-lg",children:[(0,c.jsx)("button",{onClick:()=>{l(),x()},className:"text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:"Clear All"}),(0,c.jsx)("button",{onClick:()=>{s(p),x()},className:"px-6 py-2 bg-kredivo-primary text-white font-semibold rounded-md shadow-sm hover:bg-kredivo-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-kredivo-primary",children:"Apply Filters"})]})]})})})}},3703:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},6154:(e,t,s)=>{s.r(t),s.d(t,{ActivityLogPage:()=>ee});var a=s(5376),r=s(6608),l=s(1871),i=s(5635);const n=(0,i.A)("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),d=(0,i.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var c=s(6991),o=s(6322),x=s(1616),m=s(7030),h=s(7693);const y=(0,i.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var p=s(9649),g=s(7320),u=s(9710),j=s(9467),v=s(235),f=s(2937),k=s(3703);const N=(0,i.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var b=s(9901),A=s(1775),E=s(8449),w=s(5838),_=s(3259),S=s(9474),C=s(3686),L=s(1325),R=s(1660);const U=e=>{if(null===e||"undefined"===typeof e)return'""';if("string"===typeof e&&/^\d{4}-\d{2}-\d{2}/.test(e)){const t=new Date(e);if(t instanceof Date&&!isNaN(t))return'"'.concat(t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),'"')}try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return'"'.concat(String(e),'"')}},T=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(n,{className:"w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{children:["Granted access to"," ",(0,R.jsx)("span",{className:"font-semibold",children:t.application})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Role: ",(0,R.jsx)("span",{className:"font-medium",children:t.role})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Source: ",(0,R.jsx)("span",{className:"font-medium",children:t.source_ticket})]})]})]})},P=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(d,{className:"w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{children:["New employee record created for"," ",(0,R.jsx)("span",{className:"font-semibold",children:t.details.employee_email})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Source Ticket:"," ",(0,R.jsx)("span",{className:"font-medium",children:t.details.source_ticket})]})]})]})},D=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(c.A,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),(0,R.jsx)("span",{children:"Password changed successfully."})]}),I=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(c.A,{className:"w-4 h-4 text-yellow-500 mr-2 flex-shrink-0"}),(0,R.jsxs)("span",{children:["Password was reset for user"," ",(0,R.jsx)("span",{className:"font-semibold",children:t.targetUserEmail}),"."]})]})},M=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(o.A,{className:"w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{children:"API Key created"}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Expires:"," ",(0,R.jsx)("span",{className:"font-medium",children:t.expires?new Date(t.expires).toLocaleString():"Never"})]})]})]})},O=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-2 flex-shrink-0"}),(0,R.jsx)("span",{children:"API Key was revoked."})]}),F=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(m.A,{className:"w-4 h-4 text-gray-500 mr-2 flex-shrink-0"}),(0,R.jsx)("span",{children:"User successfully logged out."})]}),q=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(o.A,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),(0,R.jsxs)("span",{children:["New role created:"," ",(0,R.jsx)("span",{className:"font-semibold",children:t.roleName})]})]})},z=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-2 flex-shrink-0"}),(0,R.jsxs)("span",{children:["Role deleted: ",(0,R.jsx)("span",{className:"font-semibold",children:t.roleName})]})]})},K=e=>{var t,s;let{changes:a}=e;return(0,R.jsxs)("div",{className:"space-y-2",children:[(null===(t=a.added)||void 0===t?void 0:t.length)>0&&(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(h.A,{className:"w-4 h-4 text-green-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("strong",{className:"font-semibold",children:"Added:"}),(0,R.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:a.added.map(e=>(0,R.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 rounded-md",children:e},e))})]})]}),(null===(s=a.removed)||void 0===s?void 0:s.length)>0&&(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(y,{className:"w-4 h-4 text-red-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("strong",{className:"font-semibold",children:"Removed:"}),(0,R.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:a.removed.map(e=>(0,R.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 rounded-md",children:e},e))})]})]})]})},W=e=>{let{changes:t,targetUser:s}=e;return(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,R.jsxs)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[s,":"]}),(0,R.jsx)("span",{className:"line-through text-red-500 dark:text-red-400",children:t.role.from}),(0,R.jsx)(p.A,{className:"w-4 h-4 text-gray-400"}),(0,R.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:t.role.to})]})},Y=e=>{let{changes:t}=e;return(0,R.jsx)("div",{className:"space-y-2",children:Object.keys(t).map(e=>(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(g.A,{className:"w-4 h-4 text-blue-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("strong",{className:"font-semibold",children:[e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),":"]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,R.jsx)("span",{className:"line-through text-red-500 dark:text-red-400",children:U(t[e].from)}),(0,R.jsx)(p.A,{className:"w-4 h-4 text-gray-400"}),(0,R.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:U(t[e].to)})]})]})]},e))})},H=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(u.A,{className:"w-4 h-4 text-red-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{children:["Reason: ",t.reason," for user attempt"," ",(0,R.jsx)("span",{className:"font-semibold text-red-500 dark:text-red-400",children:t.emailAttempt}),"."]})]})},V=e=>{let{results:t}=e;return(0,R.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,R.jsxs)("div",{className:"flex items-center",children:["SUCCESS"===e.status?(0,R.jsx)(j.A,{className:"w-4 h-4 text-green-500 mr-2 shrink-0"}):(0,R.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{className:"font-semibold capitalize w-28",children:[e.platform,":"]}),(0,R.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.message})]},e.platform))})},G=e=>{var t;let{details:s,roles:a}=e;const r=(null===(t=a.find(e=>{var t;return String(e.id)===String(null===(t=s.createdUser)||void 0===t?void 0:t.roleId)}))||void 0===t?void 0:t.name)||"Unknown Role";return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(d,{className:"w-4 h-4 text-green-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{children:["New user created:"," ",(0,R.jsx)("span",{className:"font-semibold text-green-500 dark:text-green-400",children:s.targetUserEmail})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Assigned Role: ",(0,R.jsx)("span",{className:"font-medium",children:r})]})]})]})},J=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(v.A,{className:"w-4 h-4 text-red-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{children:["User deleted:"," ",(0,R.jsx)("span",{className:"font-semibold text-red-500 dark:text-red-400",children:t.targetUserEmail})]})]})},Z=e=>{let{details:t}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(f.A,{className:"w-4 h-4 text-gray-500 mr-2 mt-1 shrink-0"}),(0,R.jsx)("pre",{className:"text-xs whitespace-pre-wrap bg-gray-100 dark:bg-gray-700 p-2 rounded-md flex-1",children:JSON.stringify(t,null,2)})]})},B=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(k.A,{className:"w-4 h-4 text-green-500 mr-2 shrink-0"}),(0,R.jsx)("span",{children:"User successfully logged in."})]}),X=e=>{let{targetUser:t}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(N,{className:"w-4 h-4 text-blue-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{children:["Viewed the profile of"," ",(0,R.jsx)("span",{className:"font-semibold text-blue-500 dark:text-blue-400",children:t}),"."]})]})},$=e=>{let{log:t,roles:s}=e;if(!t.details||0===Object.keys(t.details).length)return null;const a={APPLICATION_ACCESS_CREATE:(0,R.jsx)(T,{details:t.details.details}),EMPLOYEE_CREATE:(0,R.jsx)(P,{details:t.details}),USER_PASSWORD_CHANGE_SUCCESS:(0,R.jsx)(D,{}),ADMIN_PASSWORD_RESET:(0,R.jsx)(I,{details:t.details}),API_KEY_CREATE:(0,R.jsx)(M,{details:t.details}),API_KEY_DELETE:(0,R.jsx)(O,{}),USER_LOGOUT_SUCCESS:(0,R.jsx)(F,{}),ROLE_CREATE:(0,R.jsx)(q,{details:t.details}),ROLE_DELETE:(0,R.jsx)(z,{details:t.details}),USER_LOGIN_SUCCESS:(0,R.jsx)(B,{}),EMPLOYEE_PROFILE_VIEW:(0,R.jsx)(X,{targetUser:t.target_employee_email}),USER_CREATE:(0,R.jsx)(G,{details:t.details,roles:s}),USER_DELETE:(0,R.jsx)(J,{details:t.details}),USER_LOGIN_FAIL:(0,R.jsx)(H,{details:t.details}),USER_ROLE_UPDATE:(0,R.jsx)(W,{changes:t.details.changes,targetUser:t.details.targetUserEmail}),ROLE_PERMISSIONS_UPDATE:(0,R.jsx)(K,{changes:t.details.changes}),EMPLOYEE_UPDATE:(0,R.jsx)(Y,{changes:t.details.changes}),MANUAL_PLATFORM_SUSPENSION:(0,R.jsx)(V,{results:t.details.deactivation_results})};return(0,R.jsxs)("div",{className:"p-3 bg-gray-100 dark:bg-gray-900/70 rounded-lg shadow-inner text-sm space-y-2",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h4",{className:"font-semibold mb-1 text-gray-800 dark:text-gray-200",children:"Details:"}),a[t.action_type]||(0,R.jsx)(Z,{details:t.details})]}),t.details.context&&(0,R.jsxs)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,R.jsx)("h4",{className:"font-semibold mb-1 text-gray-800 dark:text-gray-200",children:"Context:"}),(0,R.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,R.jsx)("strong",{children:"IP Address:"})," ",t.details.context.ipAddress||"N/A"]}),(0,R.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,R.jsx)("strong",{children:"User Agent:"})," ",t.details.context.userAgent||"N/A"]})]})]})},Q=e=>{let{log:t,roles:s,isExpanded:a,onToggle:r}=e;return(0,R.jsxs)("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150",children:[(0,R.jsx)("button",{onClick:r,className:"w-full text-left",children:(0,R.jsxs)("div",{className:"flex items-start gap-4",children:[(0,R.jsx)("div",{className:"mt-1 flex-shrink-0",children:(l=t.action_type,l.includes("SUCCESS")||l.includes("CREATE")||l.includes("API_KEY_CREATE")?(0,R.jsx)(j.A,{className:"w-6 h-6 flex-shrink-0 text-green-500"}):l.includes("FAIL")||l.includes("DELETE")||l.includes("SUSPENSION")||l.includes("API_KEY_DELETE")?(0,R.jsx)(x.A,{className:"w-6 h-6 flex-shrink-0 text-red-500"}):l.includes("UPDATE")||l.includes("VIEW")||l.includes("RESET")?(0,R.jsx)(g.A,{className:"w-6 h-6 flex-shrink-0 text-blue-500"}):(0,R.jsx)(b.A,{className:"w-6 h-6 flex-shrink-0 text-gray-400"}))}),(0,R.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start",children:[(0,R.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-200 capitalize pr-4",children:t.action_type.replace(/_/g," ")}),(0,R.jsx)(p.A,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(a?"rotate-90":"")})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["by"," ",(0,R.jsx)("span",{className:"font-medium",children:t.actor_email||"System"})," ","on"," ",(0,R.jsx)("span",{className:"font-medium",children:(e=>{var t,s;return"MANUAL_PLATFORM_SUSPENSION"===e.action_type||"EMPLOYEE_PROFILE_VIEW"===e.action_type?e.target_employee_email||"N/A":e.action_type.startsWith("USER_")?e.target_user_email||(null===(t=e.details)||void 0===t?void 0:t.targetUserEmail)||"N/A":e.action_type.startsWith("EMPLOYEE_")?e.target_employee_email||"N/A":e.action_type.startsWith("ROLE_")?"Role: ".concat(null===(s=e.details)||void 0===s?void 0:s.roleName):e.action_type.startsWith("API_KEY")?e.target_user_email||"N/A":"System"})(t)})]}),(0,R.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:new Date(t.timestamp).toLocaleString()})]})]})}),a&&(0,R.jsx)("div",{className:"pt-3",children:(0,R.jsx)($,{log:t,roles:s})})]});var l},ee=()=>{const[e,t]=(0,a.useState)({actionType:"",actorEmail:"",startDate:"",endDate:""}),[s,i]=(0,a.useState)(!1),n=(0,a.useRef)(null),[d,c]=(0,a.useState)(null),{data:o=[]}=(0,r.I)({queryKey:["roles"],queryFn:async()=>(await C.A.get("/api/roles")).data}),{data:x,isLoading:m}=(0,r.I)({queryKey:["activityLogs",e],queryFn:async()=>{const t=new URLSearchParams(e).toString(),{data:s}=await C.A.get("/api/logs/activity?".concat(t));return s},keepPreviousData:!0}),{data:h}=(0,r.I)({queryKey:["activityLogFilters"],queryFn:async()=>(await C.A.get("/api/logs/activity/filters")).data}),y=()=>{t({actionType:"",actorEmail:"",startDate:"",endDate:""})},p=(0,a.useMemo)(()=>({actionTypes:(null===h||void 0===h?void 0:h.actionTypes.map(e=>({id:e,name:e.replace(/_/g," ")})))||[],actors:(null===h||void 0===h?void 0:h.actors.map(e=>({id:e,name:e})))||[]}),[h]);return(0,R.jsxs)(L.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"p-4 sm:p-6",children:[(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-2xl font-bold",children:"Activity Log"}),(0,R.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Recent events recorded in the system."})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 mt-4 sm:mt-0 w-full sm:w-auto",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsxs)("button",{ref:n,onClick:()=>i(!s),className:"flex items-center gap-2 px-4 py-2 border rounded-md text-sm font-medium transition-colors bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,R.jsx)(A.A,{size:16}),(0,R.jsx)("span",{children:"Filters"})]}),s&&(0,R.jsx)(_.I,{initialFilters:e,onApply:t,onClear:y,onClose:()=>i(!1),options:p,buttonRef:n,isActivityLog:!0})]}),(0,R.jsxs)(w.$,{onClick:async()=>{try{const t=new URLSearchParams(e).toString(),s=await C.A.get("/api/logs/activity/export?".concat(t),{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([s.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","activity-log.csv"),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)}catch(t){console.error("Failed to export logs:",t),l.Ay.error("Failed to export logs.")}},variant:"secondary",className:"w-full sm:w-auto justify-center",children:[(0,R.jsx)(E.A,{className:"w-4 h-4 mr-2"})," Export"]})]})]}),(0,R.jsx)(S.F,{filters:e,setFilters:t,setSearchInputValue:()=>{},options:p,onClear:y,isActivityLog:!0}),(0,R.jsx)("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,R.jsxs)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[m?(0,R.jsx)("div",{className:"p-6 text-center",children:"Loading logs..."}):(x||[]).map(e=>(0,R.jsx)(Q,{log:e,roles:o,isExpanded:d===e.id,onToggle:()=>{return t=e.id,void c(d===t?null:t);var t}},e.id)),!m&&(!x||0===x.length)&&(0,R.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No activity found for the selected filters."})]})})]})}},6322:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},6991:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]])},7189:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7320:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},7693:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8449:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9467:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9474:(e,t,s)=>{s.d(t,{F:()=>i});var a=s(9479),r=(s(5376),s(7189)),l=s(1660);const i=e=>{let{filters:t,setFilters:s,setSearchInputValue:i,options:n,onClear:d,isActivityLog:c=!1}=e;const o=c?{actionType:"Action",actorEmail:"Actor",startDate:"Start Date",endDate:"End Date"}:{jobTitle:"Job Title",manager:"Manager",legal_entity_id:"Legal Entity",office_location_id:"Office",employee_type_id:"Type",employee_sub_type_id:"Sub-Type",application_id:"Application"},x=c?{actionType:n.actionTypes,actorEmail:n.actors}:{legal_entity_id:n.legalEntities,office_location_id:n.officeLocations,employee_type_id:n.employeeTypes,employee_sub_type_id:n.employeeSubTypes,application_id:n.applications},m=Object.entries(t).filter(e=>{let[t,s]=e;return s&&"all"!==s&&"search"!==t}).map(e=>{let[t,s]=e,a=s;if(x[t]){var r;const e=null===(r=x[t])||void 0===r?void 0:r.find(e=>String(e.id)===String(s));e&&(a=e.name)}return{key:t,label:o[t]||t,value:a}});return 0===m.length?(0,l.jsx)("div",{className:"h-8"}):(0,l.jsxs)("div",{className:"flex items-center gap-2 h-auto flex-wrap py-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Active Filters:"}),m.map(e=>{let{key:n,label:d,value:c}=e;return(0,l.jsxs)("span",{className:"inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-kredivo-light text-kredivo-dark-text dark:bg-kredivo-primary/20 dark:text-kredivo-light",children:[d,": ",String(c).substring(0,20),(0,l.jsx)("button",{onClick:()=>(e=>{"search"===e&&i("");const r=(0,a.A)((0,a.A)({},t),{},{[e]:""});"status"===e&&(r.status="all"),s(r)})(n),className:"ml-1 -mr-1 h-4 w-4 rounded-full inline-flex items-center justify-center text-kredivo-primary hover:bg-kredivo-primary/20 dark:text-kredivo-light dark:hover:bg-kredivo-primary/40",children:(0,l.jsx)(r.A,{className:"w-3 h-3"})})]},n)}),(0,l.jsx)("button",{onClick:d,className:"text-sm font-medium text-kredivo-primary hover:underline",children:"Clear All"})]})}},9649:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9710:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9901:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(5635).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])}}]);
//# sourceMappingURL=154.83ab2114.chunk.js.map