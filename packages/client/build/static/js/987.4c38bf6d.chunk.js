/*! For license information please see 987.4c38bf6d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkemployee_access_dashboard=self.webpackChunkemployee_access_dashboard||[]).push([[987],{936:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1057:(e,s,t)=>{t.d(s,{I:()=>x});var a=t(1882),r=t(2176),l=t(803),i=t(4310),n=t(4079),d=t(8146),c=t(812);const o=e=>{let{label:s,name:t,value:a,onChange:r,options:i=[]}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s}),(0,c.jsx)(l.A,{id:t,options:i,value:a,onChange:e=>r({target:{name:t,value:e}}),placeholder:"All"})]})},x=e=>{let{initialFilters:s,onApply:t,onClear:l,onClose:x,options:m,buttonRef:h,isActivityLog:y=!1}=e;const[g,p]=(0,r.useState)(s),u=(0,r.useRef)(null),[j,v]=(0,r.useState)({top:0,left:0,width:"auto"}),f=[{id:"all",name:"All"},{id:"active",name:"Active"},{id:"inactive",name:"Inactive"},{id:"invited",name:"Invited"}];(0,r.useLayoutEffect)(()=>{if(h.current){const e=h.current.getBoundingClientRect();window.innerWidth<768?v({top:e.bottom+10,left:"1rem",right:"1rem",width:"auto"}):v({top:e.bottom+10,right:window.innerWidth-e.right,left:"auto",width:"24rem"})}},[h]),(0,r.useEffect)(()=>{const e=e=>{e.target.closest('[data-role="custom-select-options"]')||u.current&&!u.current.contains(e.target)&&h.current&&!h.current.contains(e.target)&&x()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x,h]);const N=e=>{const{name:s,value:t}=e.target;p(e=>(0,a.A)((0,a.A)({},e),{},{[s]:t}))};return(0,c.jsx)(i.Z,{children:(0,c.jsx)(n.N,{children:(0,c.jsxs)(d.P.div,{ref:u,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,scale:.98,y:-5},visible:{opacity:1,scale:1,y:0,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:-5,transition:{duration:.15,ease:"easeIn"}}},style:{position:"absolute",top:"".concat(j.top,"px"),left:j.left,right:j.right,width:j.width},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-20",children:[(0,c.jsxs)("div",{className:"p-5",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),(0,c.jsx)("div",{className:"space-y-4",children:y?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o,{label:"Action Type",name:"actionType",value:g.actionType,onChange:N,options:m.actionTypes}),(0,c.jsx)(o,{label:"Actor",name:"actorEmail",value:g.actorEmail,onChange:N,options:m.actors}),(0,c.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),(0,c.jsx)("input",{type:"date",name:"startDate",id:"startDate",value:g.startDate||"",onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),(0,c.jsx)("input",{type:"date",name:"endDate",id:"endDate",value:g.endDate||"",onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md"})]})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o,{label:"Status",name:"status",value:g.status,onChange:N,options:f}),(0,c.jsx)(o,{label:"Internal Application",name:"application_id",value:g.application_id,onChange:N,options:m.applications})]})})]}),(0,c.jsxs)("div",{className:"px-5 py-3 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600 flex justify-between items-center rounded-b-lg",children:[(0,c.jsx)("button",{onClick:()=>{l(),x()},className:"text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:"Clear All"}),(0,c.jsx)("button",{onClick:()=>{t(g),x()},className:"px-6 py-2 bg-kredivo-primary text-white font-semibold rounded-md shadow-sm hover:bg-kredivo-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-kredivo-primary",children:"Apply Filters"})]})]})})})}},1665:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2304:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2317:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2773:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3311:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]])},4638:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4971:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4987:(e,s,t)=>{t.r(s),t.d(s,{ActivityLogPage:()=>ae});var a=t(2176),r=t(3985),l=t(6158),i=t(8119);const n=(0,i.A)("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);var d=t(5139),c=t(3311),o=t(4994),x=t(2304),m=t(8326),h=t(2317);const y=(0,i.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var g=t(1665),p=t(936),u=t(4638),j=t(4971),v=t(6539),f=t(7561),N=t(6359);const k=(0,i.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var b=t(9869),A=t(8079),w=t(9137),E=t(1356),_=t(1057),S=t(5532),C=t(9889),L=t(8146),R=t(812);const U=e=>{let{className:s}=e;return(0,R.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded ".concat(s," animate-pulse")})},T=()=>(0,R.jsx)("div",{className:"p-4",children:(0,R.jsxs)("div",{className:"flex items-start gap-4",children:[(0,R.jsx)(U,{className:"w-8 h-8 rounded-full flex-shrink-0"}),(0,R.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start",children:[(0,R.jsx)(U,{className:"h-5 w-1/3"}),(0,R.jsx)(U,{className:"h-5 w-5"})]}),(0,R.jsx)(U,{className:"h-4 w-2/3 mt-2"}),(0,R.jsx)(U,{className:"h-3 w-1/2 mt-2"})]})]})}),P=()=>(0,R.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)(U,{className:"h-8 w-48 mb-2"}),(0,R.jsx)(U,{className:"h-4 w-64"})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[(0,R.jsx)(U,{className:"h-10 w-24"}),(0,R.jsx)(U,{className:"h-10 w-28"})]})]}),(0,R.jsx)(U,{className:"h-8 w-full mb-4"}),(0,R.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:[(0,R.jsx)(T,{}),(0,R.jsx)(T,{}),(0,R.jsx)(T,{}),(0,R.jsx)(T,{})]})]}),D=e=>{if(null===e||"undefined"===typeof e)return'""';if("string"===typeof e&&/^\d{4}-\d{2}-\d{2}/.test(e)){const s=new Date(e);if(s instanceof Date&&!isNaN(s))return'"'.concat(s.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),'"')}try{const s=JSON.parse(e);return JSON.stringify(s,null,2)}catch(s){return'"'.concat(String(e),'"')}},I=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(n,{className:"w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{children:["Granted access to"," ",(0,R.jsx)("span",{className:"font-semibold",children:s.application})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Role: ",(0,R.jsx)("span",{className:"font-medium",children:s.role})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Source: ",(0,R.jsx)("span",{className:"font-medium",children:s.source_ticket})]})]})]})},M=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(d.A,{className:"w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{children:["New employee record created for"," ",(0,R.jsx)("span",{className:"font-semibold",children:s.details.employee_email})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Source Ticket:"," ",(0,R.jsx)("span",{className:"font-medium",children:s.details.source_ticket})]})]})]})},O=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(c.A,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),(0,R.jsx)("span",{children:"Password changed successfully."})]}),F=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(c.A,{className:"w-4 h-4 text-yellow-500 mr-2 flex-shrink-0"}),(0,R.jsxs)("span",{children:["Password was reset for user"," ",(0,R.jsx)("span",{className:"font-semibold",children:s.targetUserEmail}),"."]})]})},q=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(o.A,{className:"w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{children:"API Key created"}),(0,R.jsxs)("p",{className:"text-sm text-gray-500",children:["Expires:"," ",(0,R.jsx)("span",{className:"font-medium",children:s.expires?new Date(s.expires).toLocaleString():"Never"})]})]})]})},z=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-2 flex-shrink-0"}),(0,R.jsx)("span",{children:"API Key was revoked."})]}),K=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(m.A,{className:"w-4 h-4 text-gray-500 mr-2 flex-shrink-0"}),(0,R.jsx)("span",{children:"User successfully logged out."})]}),W=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(o.A,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),(0,R.jsxs)("span",{children:["New role created:"," ",(0,R.jsx)("span",{className:"font-semibold",children:s.roleName})]})]})},Y=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-2 flex-shrink-0"}),(0,R.jsxs)("span",{children:["Role deleted: ",(0,R.jsx)("span",{className:"font-semibold",children:s.roleName})]})]})},H=e=>{var s,t;let{changes:a}=e;return(0,R.jsxs)("div",{className:"space-y-2",children:[(null===(s=a.added)||void 0===s?void 0:s.length)>0&&(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(h.A,{className:"w-4 h-4 text-green-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("strong",{className:"font-semibold",children:"Added:"}),(0,R.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:a.added.map(e=>(0,R.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 rounded-md",children:e},e))})]})]}),(null===(t=a.removed)||void 0===t?void 0:t.length)>0&&(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(y,{className:"w-4 h-4 text-red-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("strong",{className:"font-semibold",children:"Removed:"}),(0,R.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:a.removed.map(e=>(0,R.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 rounded-md",children:e},e))})]})]})]})},V=e=>{let{changes:s,targetUser:t}=e;return(0,R.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,R.jsxs)("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[t,":"]}),(0,R.jsx)("span",{className:"line-through text-red-500 dark:text-red-400",children:s.role.from}),(0,R.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,R.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:s.role.to})]})},G=e=>{let{changes:s}=e;return(0,R.jsx)("div",{className:"space-y-2",children:Object.keys(s).map(e=>(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(p.A,{className:"w-4 h-4 text-blue-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("strong",{className:"font-semibold",children:[e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),":"]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,R.jsx)("span",{className:"line-through text-red-500 dark:text-red-400",children:D(s[e].from)}),(0,R.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,R.jsx)("span",{className:"font-bold text-green-600 dark:text-green-400",children:D(s[e].to)})]})]})]},e))})},J=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(u.A,{className:"w-4 h-4 text-red-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{children:["Reason: ",s.reason," for user attempt"," ",(0,R.jsx)("span",{className:"font-semibold text-red-500 dark:text-red-400",children:s.emailAttempt}),"."]})]})},Z=e=>{let{results:s}=e;return(0,R.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,R.jsxs)("div",{className:"flex items-center",children:["SUCCESS"===e.status?(0,R.jsx)(j.A,{className:"w-4 h-4 text-green-500 mr-2 shrink-0"}):(0,R.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{className:"font-semibold capitalize w-28",children:[e.platform,":"]}),(0,R.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.message})]},e.platform))})},B=e=>{var s;let{details:t,roles:a}=e;const r=(null===(s=a.find(e=>{var s;return String(e.id)===String(null===(s=t.createdUser)||void 0===s?void 0:s.roleId)}))||void 0===s?void 0:s.name)||"Unknown Role";return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(d.A,{className:"w-4 h-4 text-green-500 mr-2 mt-1 shrink-0"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{children:["New user created:"," ",(0,R.jsx)("span",{className:"font-semibold text-green-500 dark:text-green-400",children:t.targetUserEmail})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Assigned Role: ",(0,R.jsx)("span",{className:"font-medium",children:r})]})]})]})},X=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(v.A,{className:"w-4 h-4 text-red-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{children:["User deleted:"," ",(0,R.jsx)("span",{className:"font-semibold text-red-500 dark:text-red-400",children:s.targetUserEmail})]})]})},$=e=>{let{details:s}=e;return(0,R.jsxs)("div",{className:"flex items-start",children:[(0,R.jsx)(f.A,{className:"w-4 h-4 text-gray-500 mr-2 mt-1 shrink-0"}),(0,R.jsx)("pre",{className:"text-xs whitespace-pre-wrap bg-gray-100 dark:bg-gray-700 p-2 rounded-md flex-1",children:JSON.stringify(s,null,2)})]})},Q=()=>(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(N.A,{className:"w-4 h-4 text-green-500 mr-2 shrink-0"}),(0,R.jsx)("span",{children:"User successfully logged in."})]}),ee=e=>{let{targetUser:s}=e;return(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(k,{className:"w-4 h-4 text-blue-500 mr-2 shrink-0"}),(0,R.jsxs)("span",{children:["Viewed the profile of"," ",(0,R.jsx)("span",{className:"font-semibold text-blue-500 dark:text-blue-400",children:s}),"."]})]})},se=e=>{let{log:s,roles:t}=e;if(!s.details||0===Object.keys(s.details).length)return null;const a={APPLICATION_ACCESS_CREATE:(0,R.jsx)(I,{details:s.details.details}),EMPLOYEE_CREATE:(0,R.jsx)(M,{details:s.details}),USER_PASSWORD_CHANGE_SUCCESS:(0,R.jsx)(O,{}),ADMIN_PASSWORD_RESET:(0,R.jsx)(F,{details:s.details}),API_KEY_CREATE:(0,R.jsx)(q,{details:s.details}),API_KEY_DELETE:(0,R.jsx)(z,{}),USER_LOGOUT_SUCCESS:(0,R.jsx)(K,{}),ROLE_CREATE:(0,R.jsx)(W,{details:s.details}),ROLE_DELETE:(0,R.jsx)(Y,{details:s.details}),USER_LOGIN_SUCCESS:(0,R.jsx)(Q,{}),EMPLOYEE_PROFILE_VIEW:(0,R.jsx)(ee,{targetUser:s.target_employee_email}),USER_CREATE:(0,R.jsx)(B,{details:s.details,roles:t}),USER_DELETE:(0,R.jsx)(X,{details:s.details}),USER_LOGIN_FAIL:(0,R.jsx)(J,{details:s.details}),USER_ROLE_UPDATE:(0,R.jsx)(V,{changes:s.details.changes,targetUser:s.details.targetUserEmail}),ROLE_PERMISSIONS_UPDATE:(0,R.jsx)(H,{changes:s.details.changes}),EMPLOYEE_UPDATE:(0,R.jsx)(G,{changes:s.details.changes}),MANUAL_PLATFORM_SUSPENSION:(0,R.jsx)(Z,{results:s.details.deactivation_results})};return(0,R.jsxs)("div",{className:"p-3 bg-gray-100 dark:bg-gray-900/70 rounded-lg shadow-inner text-sm space-y-2",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h4",{className:"font-semibold mb-1 text-gray-800 dark:text-gray-200",children:"Details:"}),a[s.action_type]||(0,R.jsx)($,{details:s.details})]}),s.details.context&&(0,R.jsxs)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,R.jsx)("h4",{className:"font-semibold mb-1 text-gray-800 dark:text-gray-200",children:"Context:"}),(0,R.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,R.jsx)("strong",{children:"IP Address:"})," ",s.details.context.ipAddress||"N/A"]}),(0,R.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,R.jsx)("strong",{children:"User Agent:"})," ",s.details.context.userAgent||"N/A"]})]})]})},te=e=>{let{log:s,roles:t,isExpanded:a,onToggle:r}=e;return(0,R.jsxs)("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors duration-150",children:[(0,R.jsx)("button",{onClick:r,className:"w-full text-left",children:(0,R.jsxs)("div",{className:"flex items-start gap-4",children:[(0,R.jsx)("div",{className:"mt-1 flex-shrink-0",children:(l=s.action_type,l.includes("SUCCESS")||l.includes("CREATE")||l.includes("API_KEY_CREATE")?(0,R.jsx)(j.A,{className:"w-6 h-6 flex-shrink-0 text-green-500"}):l.includes("FAIL")||l.includes("DELETE")||l.includes("SUSPENSION")||l.includes("API_KEY_DELETE")?(0,R.jsx)(x.A,{className:"w-6 h-6 flex-shrink-0 text-red-500"}):l.includes("UPDATE")||l.includes("VIEW")||l.includes("RESET")?(0,R.jsx)(p.A,{className:"w-6 h-6 flex-shrink-0 text-blue-500"}):(0,R.jsx)(b.A,{className:"w-6 h-6 flex-shrink-0 text-gray-400"}))}),(0,R.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start",children:[(0,R.jsx)("p",{className:"font-semibold text-gray-800 dark:text-gray-200 capitalize pr-4",children:s.action_type.replace(/_/g," ")}),(0,R.jsx)(g.A,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(a?"rotate-90":"")})]}),(0,R.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["by"," ",(0,R.jsx)("span",{className:"font-medium",children:s.actor_email||"System"})," ","on"," ",(0,R.jsx)("span",{className:"font-medium",children:(e=>{var s,t;return"MANUAL_PLATFORM_SUSPENSION"===e.action_type||"EMPLOYEE_PROFILE_VIEW"===e.action_type?e.target_employee_email||"N/A":e.action_type.startsWith("USER_")?e.target_user_email||(null===(s=e.details)||void 0===s?void 0:s.targetUserEmail)||"N/A":e.action_type.startsWith("EMPLOYEE_")?e.target_employee_email||"N/A":e.action_type.startsWith("ROLE_")?"Role: ".concat(null===(t=e.details)||void 0===t?void 0:t.roleName):e.action_type.startsWith("API_KEY")?e.target_user_email||"N/A":"System"})(s)})]}),(0,R.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:new Date(s.timestamp).toLocaleString()})]})]})}),a&&(0,R.jsx)("div",{className:"pt-3",children:(0,R.jsx)(se,{log:s,roles:t})})]});var l},ae=()=>{const[e,s]=(0,a.useState)({actionType:"",actorEmail:"",startDate:"",endDate:""}),[t,i]=(0,a.useState)(!1),n=(0,a.useRef)(null),[d,c]=(0,a.useState)(null),{data:o=[]}=(0,r.I)({queryKey:["roles"],queryFn:async()=>(await C.A.get("/api/roles")).data}),{data:x,isLoading:m}=(0,r.I)({queryKey:["activityLogs",e],queryFn:async()=>{const s=new URLSearchParams(e).toString(),{data:t}=await C.A.get("/api/logs/activity?".concat(s));return t},keepPreviousData:!0}),{data:h}=(0,r.I)({queryKey:["activityLogFilters"],queryFn:async()=>(await C.A.get("/api/logs/activity/filters")).data}),y=()=>{s({actionType:"",actorEmail:"",startDate:"",endDate:""})},g=(0,a.useMemo)(()=>({actionTypes:(null===h||void 0===h?void 0:h.actionTypes.map(e=>({id:e,name:e.replace(/_/g," ")})))||[],actors:(null===h||void 0===h?void 0:h.actors.map(e=>({id:e,name:e})))||[]}),[h]);return m?(0,R.jsx)(P,{}):(0,R.jsxs)(L.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"p-4 sm:p-6",children:[(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-2xl font-bold",children:"Activity Log"}),(0,R.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Recent events recorded in the system."})]}),(0,R.jsxs)("div",{className:"flex items-center gap-2 mt-4 sm:mt-0 w-full sm:w-auto",children:[(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsxs)("button",{ref:n,onClick:()=>i(!t),className:"flex items-center gap-2 px-4 py-2 border rounded-md text-sm font-medium transition-colors bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,R.jsx)(A.A,{size:16}),(0,R.jsx)("span",{children:"Filters"})]}),t&&(0,R.jsx)(_.I,{initialFilters:e,onApply:s,onClear:y,onClose:()=>i(!1),options:g,buttonRef:n,isActivityLog:!0})]}),(0,R.jsxs)(E.$,{onClick:async()=>{try{const s=new URLSearchParams(e).toString(),t=await C.A.get("/api/logs/activity/export?".concat(s),{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","activity-log.csv"),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)}catch(s){console.error("Failed to export logs:",s),l.Ay.error("Failed to export logs.")}},variant:"secondary",className:"w-full sm:w-auto justify-center",children:[(0,R.jsx)(w.A,{className:"w-4 h-4 mr-2"})," Export"]})]})]}),(0,R.jsx)(S.F,{filters:e,setFilters:s,setSearchInputValue:()=>{},options:g,onClear:y,isActivityLog:!0}),(0,R.jsx)("div",{className:"mt-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,R.jsxs)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[(x||[]).map(e=>(0,R.jsx)(te,{log:e,roles:o,isExpanded:d===e.id,onToggle:()=>{return s=e.id,void c(d===s?null:s);var s}},e.id)),!m&&(!x||0===x.length)&&(0,R.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No activity found for the selected filters."})]})})]})}},4994:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},5139:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5532:(e,s,t)=>{t.d(s,{F:()=>i});var a=t(1882),r=(t(2176),t(2773)),l=t(812);const i=e=>{let{filters:s,setFilters:t,setSearchInputValue:i,options:n,onClear:d,isActivityLog:c=!1}=e;const o=c?{actionType:"Action",actorEmail:"Actor",startDate:"Start Date",endDate:"End Date"}:{jobTitle:"Job Title",manager:"Manager",legal_entity_id:"Legal Entity",office_location_id:"Office",employee_type_id:"Type",employee_sub_type_id:"Sub-Type",application_id:"Application"},x=c?{actionType:n.actionTypes,actorEmail:n.actors}:{legal_entity_id:n.legalEntities,office_location_id:n.officeLocations,employee_type_id:n.employeeTypes,employee_sub_type_id:n.employeeSubTypes,application_id:n.applications},m=Object.entries(s).filter(e=>{let[s,t]=e;return t&&"all"!==t&&"search"!==s}).map(e=>{let[s,t]=e,a=t;if(x[s]){var r;const e=null===(r=x[s])||void 0===r?void 0:r.find(e=>String(e.id)===String(t));e&&(a=e.name)}return{key:s,label:o[s]||s,value:a}});return 0===m.length?(0,l.jsx)("div",{className:"h-8"}):(0,l.jsxs)("div",{className:"flex items-center gap-2 h-auto flex-wrap py-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Active Filters:"}),m.map(e=>{let{key:n,label:d,value:c}=e;return(0,l.jsxs)("span",{className:"inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-kredivo-light text-kredivo-dark-text dark:bg-kredivo-primary/20 dark:text-kredivo-light",children:[d,": ",String(c).substring(0,20),(0,l.jsx)("button",{onClick:()=>(e=>{"search"===e&&i("");const r=(0,a.A)((0,a.A)({},s),{},{[e]:""});"status"===e&&(r.status="all"),t(r)})(n),className:"ml-1 -mr-1 h-4 w-4 rounded-full inline-flex items-center justify-center text-kredivo-primary hover:bg-kredivo-primary/20 dark:text-kredivo-light dark:hover:bg-kredivo-primary/40",children:(0,l.jsx)(r.A,{className:"w-3 h-3"})})]},n)}),(0,l.jsx)("button",{onClick:d,className:"text-sm font-medium text-kredivo-primary hover:underline",children:"Clear All"})]})}},6359:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},6539:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},7561:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},8079:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},9137:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9869:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(8119).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])}}]);
//# sourceMappingURL=987.4c38bf6d.chunk.js.map