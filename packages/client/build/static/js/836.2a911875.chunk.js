"use strict";(self.webpackChunkemployee_access_dashboard=self.webpackChunkemployee_access_dashboard||[]).push([[836],{1057:(e,t,a)=>{a.d(t,{I:()=>m});var s=a(1882),r=a(2176),l=a(803),i=a(4310),n=a(4079),o=a(8146),d=a(812);const c=e=>{let{label:t,name:a,value:s,onChange:r,options:i=[]}=e;return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),(0,d.jsx)(l.A,{id:a,options:i,value:s,onChange:e=>r({target:{name:a,value:e}}),placeholder:"All"})]})},m=e=>{let{initialFilters:t,onApply:a,onClear:l,onClose:m,options:x,buttonRef:p,isActivityLog:g=!1}=e;const[u,h]=(0,r.useState)(t),y=(0,r.useRef)(null),[b,v]=(0,r.useState)({top:0,left:0,width:"auto"}),f=[{id:"all",name:"All"},{id:"active",name:"Active"},{id:"inactive",name:"Inactive"},{id:"invited",name:"Invited"}];(0,r.useLayoutEffect)(()=>{if(p.current){const e=p.current.getBoundingClientRect();window.innerWidth<768?v({top:e.bottom+10,left:"1rem",right:"1rem",width:"auto"}):v({top:e.bottom+10,right:window.innerWidth-e.right,left:"auto",width:"24rem"})}},[p]),(0,r.useEffect)(()=>{const e=e=>{e.target.closest('[data-role="custom-select-options"]')||y.current&&!y.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&m()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[m,p]);const j=e=>{const{name:t,value:a}=e.target;h(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))};return(0,d.jsx)(i.Z,{children:(0,d.jsx)(n.N,{children:(0,d.jsxs)(o.P.div,{ref:y,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,scale:.98,y:-5},visible:{opacity:1,scale:1,y:0,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,scale:.98,y:-5,transition:{duration:.15,ease:"easeIn"}}},style:{position:"absolute",top:"".concat(b.top,"px"),left:b.left,right:b.right,width:b.width},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-20",children:[(0,d.jsxs)("div",{className:"p-5",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),(0,d.jsx)("div",{className:"space-y-4",children:g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c,{label:"Action Type",name:"actionType",value:u.actionType,onChange:j,options:x.actionTypes}),(0,d.jsx)(c,{label:"Actor",name:"actorEmail",value:u.actorEmail,onChange:j,options:x.actors}),(0,d.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),(0,d.jsx)("input",{type:"date",name:"startDate",id:"startDate",value:u.startDate||"",onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),(0,d.jsx)("input",{type:"date",name:"endDate",id:"endDate",value:u.endDate||"",onChange:j,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md"})]})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c,{label:"Status",name:"status",value:u.status,onChange:j,options:f}),(0,d.jsx)(c,{label:"Internal Application",name:"application_id",value:u.application_id,onChange:j,options:x.applications})]})})]}),(0,d.jsxs)("div",{className:"px-5 py-3 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600 flex justify-between items-center rounded-b-lg",children:[(0,d.jsx)("button",{onClick:()=>{l(),m()},className:"text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-black dark:hover:text-white",children:"Clear All"}),(0,d.jsx)("button",{onClick:()=>{a(u),m()},className:"px-6 py-2 bg-kredivo-primary text-white font-semibold rounded-md shadow-sm hover:bg-kredivo-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-kredivo-primary",children:"Apply Filters"})]})]})})})}},1811:(e,t,a)=>{a.d(t,{W:()=>i});var s=a(2176),r=a(812);const l=e=>{let{status:t}=e;return(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((()=>{switch(t){case"Active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"For Escalation":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}})()),children:t})},i=s.memo(l)},5532:(e,t,a)=>{a.d(t,{F:()=>i});var s=a(1882),r=(a(2176),a(2773)),l=a(812);const i=e=>{let{filters:t,setFilters:a,setSearchInputValue:i,options:n,onClear:o,isActivityLog:d=!1}=e;const c=d?{actionType:"Action",actorEmail:"Actor",startDate:"Start Date",endDate:"End Date"}:{jobTitle:"Job Title",manager:"Manager",legal_entity_id:"Legal Entity",office_location_id:"Office",employee_type_id:"Type",employee_sub_type_id:"Sub-Type",application_id:"Application"},m=d?{actionType:n.actionTypes,actorEmail:n.actors}:{legal_entity_id:n.legalEntities,office_location_id:n.officeLocations,employee_type_id:n.employeeTypes,employee_sub_type_id:n.employeeSubTypes,application_id:n.applications},x=Object.entries(t).filter(e=>{let[t,a]=e;return a&&"all"!==a&&"search"!==t}).map(e=>{let[t,a]=e,s=a;if(m[t]){var r;const e=null===(r=m[t])||void 0===r?void 0:r.find(e=>String(e.id)===String(a));e&&(s=e.name)}return{key:t,label:c[t]||t,value:s}});return 0===x.length?(0,l.jsx)("div",{className:"h-8"}):(0,l.jsxs)("div",{className:"flex items-center gap-2 h-auto flex-wrap py-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:"Active Filters:"}),x.map(e=>{let{key:n,label:o,value:d}=e;return(0,l.jsxs)("span",{className:"inline-flex items-center gap-x-1.5 py-1.5 px-3 rounded-full text-xs font-medium bg-kredivo-light text-kredivo-dark-text dark:bg-kredivo-primary/20 dark:text-kredivo-light",children:[o,": ",String(d).substring(0,20),(0,l.jsx)("button",{onClick:()=>(e=>{"search"===e&&i("");const r=(0,s.A)((0,s.A)({},t),{},{[e]:""});"status"===e&&(r.status="all"),a(r)})(n),className:"ml-1 -mr-1 h-4 w-4 rounded-full inline-flex items-center justify-center text-kredivo-primary hover:bg-kredivo-primary/20 dark:text-kredivo-light dark:hover:bg-kredivo-primary/40",children:(0,l.jsx)(r.A,{className:"w-3 h-3"})})]},n)}),(0,l.jsx)("button",{onClick:o,className:"text-sm font-medium text-kredivo-primary hover:underline",children:"Clear All"})]})}},5798:(e,t,a)=>{a.d(t,{U:()=>r});var s=a(2176);const r=e=>{const[t,a]=(0,s.useState)(window.matchMedia(e).matches);return(0,s.useEffect)(()=>{const t=window.matchMedia(e),s=()=>a(t.matches);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[e]),t}},9836:(e,t,a)=>{a.r(t),a.d(t,{EmployeeListPage:()=>J});var s=a(1882),r=a(2176),l=a(5204),i=a(4571),n=a(1162),o=a(9999),d=a(6324),c=a(2841),m=a(936),x=a(6539),p=a(2773),g=a(9600),u=a(7417),h=a(4906),y=a(8079),b=a(9137),v=a(272),f=a(9853),j=a(6158),k=a(1356),w=a(1811),N=a(1057),A=a(4278),C=a(1665),S=a(812);const _=e=>{let{pagination:t,setPagination:a}=e;const{currentPage:r,totalPages:l,totalCount:i,limit:n}=t;if(0===i)return null;const o=(r-1)*n+1,d=Math.min(r*n,i);return(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between px-6 py-3 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[(0,S.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2 sm:mb-0",children:["Showing ",(0,S.jsx)("span",{className:"font-semibold",children:o})," to ",(0,S.jsx)("span",{className:"font-semibold",children:d})," of ",(0,S.jsx)("span",{className:"font-semibold",children:i})," results"]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>a(e=>(0,s.A)((0,s.A)({},e),{},{currentPage:e.currentPage-1})),disabled:1===r,className:"p-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-gray-700",children:(0,S.jsx)(A.A,{className:"w-5 h-5"})}),(0,S.jsxs)("span",{className:"text-sm",children:["Page ",r," of ",l]}),(0,S.jsx)("button",{onClick:()=>a(e=>(0,s.A)((0,s.A)({},e),{},{currentPage:e.currentPage+1})),disabled:r===l,className:"p-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 dark:hover:bg-gray-700",children:(0,S.jsx)(C.A,{className:"w-5 h-5"})})]})]})},E=e=>{let{currentStatus:t,onStatusChange:a}=e;return(0,S.jsx)("div",{className:"flex items-center border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:["all","active","escalation","inactive"].map(e=>{return(0,S.jsx)("button",{onClick:()=>a(e),className:"px-4 py-3 text-sm font-semibold transition-colors -mb-px border-b-2 whitespace-nowrap ".concat(t===e?"border-kredivo-primary text-kredivo-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:(s=e,s.charAt(0).toUpperCase()+s.slice(1)).replace("_"," ")},e);var s})})};var P=a(5532),T=a(5383);const F=()=>(0,S.jsxs)("div",{className:"text-center py-16 text-gray-500 dark:text-gray-400",children:[(0,S.jsx)(T.A,{className:"mx-auto w-12 h-12 text-gray-400"}),(0,S.jsx)("p",{className:"font-semibold mt-4",children:"No Employees Found"}),(0,S.jsx)("p",{className:"text-sm mt-1",children:"Try adjusting your search or filter criteria."})]});var D=a(7098),L=a(5798),R=a(8146),I=a(9889),O=a(4416),z=a(4959),B=a(4638),U=a(4971),M=a(4079);const V=e=>{let{isOpen:t,onClose:a}=e;const[s,l]=(0,r.useState)(null),[i,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),c=(0,O.jE)(),m=()=>{l(null),d(null),a()};return(0,S.jsx)(M.N,{children:t&&(0,S.jsx)(R.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:(0,S.jsxs)(R.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg",onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,S.jsx)("h3",{className:"text-lg font-semibold",children:"Bulk Import Employees"}),(0,S.jsx)("button",{onClick:m,className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:(0,S.jsx)(p.A,{className:"w-5 h-5"})})]}),(0,S.jsx)("div",{className:"p-6",children:o?(0,S.jsxs)("div",{children:[(0,S.jsx)("h4",{className:"font-semibold mb-2",children:"Import Results"}),(0,S.jsxs)("div",{className:"max-h-60 overflow-y-auto p-3 bg-gray-100 dark:bg-gray-900 rounded-md space-y-2",children:[o.errors&&o.errors.map((e,t)=>(0,S.jsxs)("div",{className:"flex items-start gap-2 text-red-600 dark:text-red-400",children:[(0,S.jsx)(B.A,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,S.jsxs)("p",{className:"text-sm",children:[e.row?"Row ".concat(e.row,": "):"",e.message]})]},t)),o.created>0&&(0,S.jsxs)("div",{className:"flex items-start gap-2 text-green-600 dark:text-green-400",children:[(0,S.jsx)(U.A,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,S.jsxs)("p",{className:"text-sm",children:["Successfully created ",o.created," employees."]})]}),o.updated>0&&(0,S.jsxs)("div",{className:"flex items-start gap-2 text-blue-600 dark:text-blue-400",children:[(0,S.jsx)(U.A,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,S.jsxs)("p",{className:"text-sm",children:["Successfully updated ",o.updated," employees."]})]})]})]}):(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-3",children:[(0,S.jsx)("p",{children:"Upload a CSV file to create or update employees in bulk. Required columns are: `first_name`, `last_name`, and `employee_email`."}),(0,S.jsx)("div",{className:"flex justify-center",children:(0,S.jsxs)("button",{onClick:async()=>{try{const e=await I.A.get("/api/employees/template/csv",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","employee_import_template.csv"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}catch(e){j.Ay.error("Failed to download template."),console.error("Template download error:",e)}},className:"inline-flex items-center gap-2 text-sm font-medium text-kredivo-primary hover:text-kredivo-dark-text",children:[(0,S.jsx)(b.A,{className:"w-4 h-4"}),"Download CSV Template"]})})]}),(0,S.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,S.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[(0,S.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,S.jsx)(v.A,{className:"w-8 h-8 mb-2 text-gray-500 dark:text-gray-400"}),(0,S.jsxs)("p",{className:"mb-1 text-sm text-gray-500 dark:text-gray-400",children:[(0,S.jsx)("span",{className:"font-semibold",children:"Click to upload"})," ","or drag and drop"]}),(0,S.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"CSV (MAX. 5MB)"})]}),(0,S.jsx)("input",{type:"file",className:"hidden",accept:".csv",onChange:e=>{const t=e.target.files[0];t&&"text/csv"===t.type?l(t):(j.Ay.error("Please select a valid .csv file."),l(null))}})]})}),s&&(0,S.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-gray-900 rounded-md",children:[(0,S.jsx)(z.A,{className:"w-5 h-5 text-gray-500"}),(0,S.jsx)("span",{className:"text-sm font-medium",children:s.name})]})]})}),(0,S.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600 flex justify-end gap-3",children:[(0,S.jsx)(k.$,{onClick:m,variant:"secondary",children:"Close"}),!o&&(0,S.jsx)(k.$,{onClick:async()=>{if(!s)return void j.Ay.error("Please select a file to upload.");n(!0),d(null);const e=new FormData;e.append("file",s);try{const{data:t}=await I.A.post("/api/employees/bulk-import",e,{headers:{"Content-Type":"multipart/form-data"}});d(t),j.Ay.success("File processed successfully!"),c.invalidateQueries(["employees"])}catch(r){var t,a;const e=(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"An error occurred during upload.";d({errors:[{message:e}]}),j.Ay.error(e)}finally{n(!1)}},disabled:i||!s,variant:"primary",children:i?"Uploading...":"Upload & Process"})]})]})})})};var K=a(7687);const W=r.memo(e=>{let{employees:t}=e;return(0,S.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>{const t=[e.first_name,e.middle_name,e.last_name].filter(Boolean).join(" ");return(0,S.jsxs)(l.N_,{to:"/employees/".concat(e.id),className:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[(0,S.jsxs)("div",{className:"flex justify-between items-start",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"font-bold text-gray-900 dark:text-white",children:t}),(0,S.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.employee_email})]}),(0,S.jsx)(w.W,{status:e.status})]}),(0,S.jsx)("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:(0,S.jsx)("p",{children:e.position_name||"No position specified"})})]},e.id)})})}),$=r.memo(e=>{var t,a,s,l;let{employees:p,sorting:g,setSorting:u,selectedRows:h,handleSelectAll:y,handleSelectRow:b,onEdit:v,onDeactivate:j}=e;const k=(0,r.useRef)(null),[N,A]=(0,r.useState)(null),C=(0,r.useRef)(null),_=(0,i.Zp)();(0,r.useEffect)(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&A(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const E=(0,f.Te)({count:p.length,getScrollElement:()=>k.current,estimateSize:()=>65,overscan:10}),P=e=>{let{children:t,columnKey:a}=e;const s=g.sortBy===a;return(0,S.jsxs)("button",{onClick:()=>u(e=>({sortBy:a,sortOrder:s&&"asc"===e.sortOrder?"desc":"asc"})),className:"flex items-center gap-2 w-full text-left font-bold",children:[(0,S.jsx)("span",{children:t}),(0,S.jsx)("span",{className:"text-gray-400",children:s?"asc"===g.sortOrder?(0,S.jsx)(n.A,{className:"w-4 h-4"}):(0,S.jsx)(o.A,{className:"w-4 h-4"}):(0,S.jsx)(d.A,{className:"w-4 h-4 opacity-50"})})]})},T=E.getVirtualItems(),F=T.length>0&&null!==(t=null===(a=T[0])||void 0===a?void 0:a.start)&&void 0!==t?t:0,D=T.length>0?E.getTotalSize()-(null!==(s=null===(l=T[T.length-1])||void 0===l?void 0:l.end)&&void 0!==s?s:0):0;return(0,S.jsx)("div",{ref:k,className:"h-[600px] overflow-auto",children:(0,S.jsxs)("table",{className:"min-w-full table-fixed",children:[(0,S.jsx)("thead",{className:"sticky top-0 bg-gray-50 dark:bg-gray-800 z-10",children:(0,S.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,S.jsx)("th",{className:"px-6 py-3 w-[5%] text-left text-xs uppercase text-gray-500",children:(0,S.jsx)("input",{type:"checkbox",onChange:y,checked:p.length>0&&h.size===p.length,className:"rounded"})}),(0,S.jsx)("th",{className:"px-6 py-3 w-[25%] text-left text-xs uppercase text-gray-500",children:(0,S.jsx)(P,{columnKey:"first_name",children:"Employee"})}),(0,S.jsx)("th",{className:"px-6 py-3 w-[30%] text-left text-xs uppercase text-gray-500",children:(0,S.jsx)(P,{columnKey:"employee_email",children:"Email"})}),(0,S.jsx)("th",{className:"px-6 py-3 w-[20%] text-left text-xs uppercase text-gray-500",children:(0,S.jsx)(P,{columnKey:"position_name",children:"Job Title"})}),(0,S.jsx)("th",{className:"px-6 py-3 w-[15%] text-left text-xs uppercase text-gray-500",children:(0,S.jsx)(P,{columnKey:"status",children:"Status"})}),(0,S.jsx)("th",{className:"px-6 py-3 w-[5%] text-left text-xs uppercase text-gray-500"})]})}),(0,S.jsxs)(R.P.tbody,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},children:[F>0&&(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:6,style:{height:"".concat(F,"px")}})}),T.map(e=>{const t=p[e.index],a=[t.first_name,t.middle_name,t.last_name].filter(Boolean).join(" ");return(0,S.jsxs)(R.P.tr,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},"data-index":e.index,ref:E.measureElement,onClick:()=>_("/employees/".concat(t.id)),className:"border-b border-gray-200 dark:border-gray-700 cursor-pointer ".concat(h.has(t.id)?"bg-kredivo-light text-kredivo-dark-text dark:bg-kredivo-primary/20 dark:text-kredivo-light":"hover:bg-gray-50 dark:hover:bg-gray-700/50"),children:[(0,S.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,S.jsx)("input",{type:"checkbox",onChange:()=>b(t.id),checked:h.has(t.id),className:"rounded",onClick:e=>e.stopPropagation()})}),(0,S.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:a}),(0,S.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.employee_email}),(0,S.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:t.position_name}),(0,S.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,S.jsx)(w.W,{status:t.status})}),(0,S.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,S.jsxs)("div",{className:"relative",ref:N===t.id?C:null,children:[(0,S.jsx)("button",{onClick:e=>{e.stopPropagation(),A(e=>e===t.id?null:t.id)},className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:(0,S.jsx)(c.A,{className:"w-4 h-4"})}),N===t.id&&(0,S.jsx)("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-xl z-20",children:(0,S.jsxs)("ul",{children:[(0,S.jsx)("li",{children:(0,S.jsxs)("button",{onClick:()=>{v(t),A(null)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,S.jsx)(m.A,{className:"w-4 h-4"})," Edit Employee"]})}),(0,S.jsx)("li",{children:(0,S.jsxs)("button",{onClick:()=>{j(t),A(null)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-red-500 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50",children:[(0,S.jsx)(x.A,{className:"w-4 h-4"})," Suspend Access"]})})]})})]})})]},e.key)}),D>0&&(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:6,style:{height:"".concat(D,"px")}})})]})]})})}),J=e=>{let{employees:t,isLoading:a,filters:l,setFilters:i,pagination:n,setPagination:o,sorting:d,setSorting:c,onEdit:m,onDeactivate:x}=e;const[f,w]=(0,r.useState)(!1),[A,C]=(0,r.useState)(!1),[T,O]=(0,r.useState)(l.search),z=((e,t)=>{const[a,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),a})(T,500),[B,U]=(0,r.useState)(!1),M=(0,r.useRef)(null),J=localStorage.getItem("accessToken"),[Z,q]=(0,r.useState)(new Set),[Q,X]=(0,r.useState)(!1),G=(0,L.U)("(min-width: 768px)"),H={legalEntities:(0,D.s)("employees/options/legal_entities",J),officeLocations:(0,D.s)("employees/options/office_locations",J),employeeTypes:(0,D.s)("employees/options/employee_types",J),employeeSubTypes:(0,D.s)("employees/options/employee_sub_types",J),applications:(0,D.s)("applications",J)};(0,r.useEffect)(()=>{U(!0);const e=setTimeout(()=>{i(e=>(0,s.A)((0,s.A)({},e),{},{search:z})),1!==n.currentPage&&o(e=>(0,s.A)((0,s.A)({},e),{},{currentPage:1})),U(!1)},500);return()=>clearTimeout(e)},[z,i,o,n.currentPage]),(0,r.useEffect)(()=>{q(new Set)},[l,n.currentPage,t]);const Y=()=>{i({status:"all",search:"",jobTitle:"",manager:"",legal_entity_id:"",office_location_id:"",employee_type_id:"",employee_sub_type_id:"",application_id:""}),o(e=>(0,s.A)((0,s.A)({},e),{},{currentPage:1})),O("")},ee=(0,r.useMemo)(()=>Object.entries(l).some(e=>{let[t,a]=e;return"status"===t?"all"!==a:"search"!==t&&!!a}),[l]);return a&&!B?(0,S.jsx)("div",{className:"p-4 sm:p-6",children:(0,S.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,S.jsx)(E,{currentStatus:l.status,onStatusChange:()=>{}}),(0,S.jsx)(K.S,{count:10})]})}):(0,S.jsxs)(R.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"p-4 sm:p-6",children:[(0,S.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-2 min-h-[40px]",children:G&&Z.size>0?(0,S.jsxs)("div",{className:"w-full flex justify-between items-center bg-kredivo-light p-2 rounded-lg",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>q(new Set),className:"p-2 text-kredivo-dark-text rounded-full hover:bg-kredivo-primary/20",children:(0,S.jsx)(p.A,{className:"w-5 h-5"})}),(0,S.jsxs)("span",{className:"font-semibold text-kredivo-dark-text",children:[Z.size," selected"]})]}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)(k.$,{onClick:()=>X(e=>!e),variant:"primary",children:"Actions"}),Q&&(0,S.jsx)("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-xl z-20",children:(0,S.jsx)("ul",{children:(0,S.jsx)("li",{children:(0,S.jsxs)("button",{onClick:async()=>{const e=fetch("".concat("https://goat-backend-990004954390.asia-southeast2.run.app","/api/employees/bulk-deactivate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(J)},body:JSON.stringify({employeeIds:Array.from(Z),platforms:["google","slack","jumpcloud","atlassian"]})});j.Ay.promise(e,{loading:"Processing bulk deactivation...",success:"Bulk deactivation complete!",error:"An error occurred during bulk deactivation."}),e.finally(()=>{q(new Set)})},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-red-500 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50",children:[(0,S.jsx)(g.A,{className:"w-4 h-4"})," Deactivate Selected"]})})})})]})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white self-start sm:self-center",children:"Employees"}),(0,S.jsxs)("div",{className:"flex items-center gap-2 w-full sm:w-auto flex-wrap",children:[(0,S.jsxs)("div",{className:"relative flex-grow",children:[(0,S.jsx)(u.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"text",placeholder:"Search employees...",value:T,onChange:e=>O(e.target.value),className:"w-full sm:w-64 pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-kredivo-primary focus:outline-none"}),B&&(0,S.jsx)(h.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-gray-400"})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsxs)("button",{ref:M,onClick:()=>w(!f),className:"flex items-center gap-2 px-4 py-2 border rounded-md text-sm font-medium transition-colors ".concat(ee||f?"bg-kredivo-light text-kredivo-dark-text border-kredivo-primary/30":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,S.jsx)(y.A,{size:16}),(0,S.jsx)("span",{children:"Advanced"}),ee&&(0,S.jsx)("div",{className:"w-2 h-2 bg-kredivo-primary rounded-full"})]}),f&&(0,S.jsx)(N.I,{initialFilters:l,onApply:i,onClear:Y,onClose:()=>w(!1),options:H,buttonRef:M})]}),(0,S.jsxs)(k.$,{onClick:async()=>{const e=new URLSearchParams;for(const a in l)l[a]&&"all"!==l[a]&&e.append(a,l[a]);try{const t=await I.A.get("/api/employees/export?".concat(e.toString()),{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download","employees.csv"),document.body.appendChild(s),s.click(),s.parentNode.removeChild(s)}catch(t){j.Ay.error("Failed to export employees."),console.error(t)}},variant:"secondary",children:[(0,S.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Export"]}),(0,S.jsxs)(k.$,{onClick:()=>C(!0),variant:"secondary",children:[(0,S.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Import"]})]})]})]})}),(0,S.jsx)(P.F,{filters:l,setFilters:i,setSearchInputValue:O,options:H,onClear:Y}),(0,S.jsx)("div",{className:"mt-2",children:(0,S.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,S.jsx)(E,{currentStatus:l.status,onStatusChange:e=>{i(t=>(0,s.A)((0,s.A)({},t),{},{status:e})),o(e=>(0,s.A)((0,s.A)({},e),{},{currentPage:1}))}}),t.length>0?G?(0,S.jsx)($,{employees:t,sorting:d,setSorting:c,selectedRows:Z,handleSelectAll:e=>{e.target.checked?q(new Set(t.map(e=>e.id))):q(new Set)},handleSelectRow:e=>{const t=new Set(Z);t.has(e)?t.delete(e):t.add(e),q(t)},onEdit:m,onDeactivate:x}):(0,S.jsx)(W,{employees:t}):(0,S.jsx)(F,{}),t.length>0&&(0,S.jsx)(_,{pagination:n,setPagination:o})]})}),(0,S.jsx)(V,{isOpen:A,onClose:()=>C(!1)})]})}}}]);
//# sourceMappingURL=836.2a911875.chunk.js.map